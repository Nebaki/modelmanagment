/*!
Colorbox v1.4.33 - 2013-10-31
jQuery lightbox and modal window plugin
(c) 2013 Jack Moore - http://www.jacklmoore.com/colorbox
license: http://www.opensource.org/licenses/mit-license.php
*/(function(e,t,i){function o(i,o,n){var r=t.createElement(i);return o&&(r.id=Z+o),n&&(r.style.cssText=n),e(r)}function n(){return i.innerHeight?i.innerHeight:e(i).height()}function r(e){var t=k.length,i=(z+e)%t;return 0>i?t+i:i}function h(e,t){return Math.round((/%/.test(e)?("x"===t?E.width():n())/100:1)*parseInt(e,10))}function l(e,t){return e.photo||e.photoRegex.test(t)}function s(e,t){return e.retinaUrl&&i.devicePixelRatio>1?t.replace(e.photoRegex,e.retinaSuffix):t}function a(e){"contains"in g[0]&&!g[0].contains(e.target)&&(e.stopPropagation(),g.focus())}function d(){var t,i=e.data(N,Y);null==i?(B=e.extend({},X),console&&console.log&&console.log("Error: cboxElement missing settings object")):B=e.extend({},i);for(t in B)e.isFunction(B[t])&&"on"!==t.slice(0,2)&&(B[t]=B[t].call(N));B.rel=B.rel||N.rel||e(N).data("rel")||"nofollow",B.href=B.href||e(N).attr("href"),B.title=B.title||N.title,"string"==typeof B.href&&(B.href=e.trim(B.href))}function c(i,o){e(t).trigger(i),lt.triggerHandler(i),e.isFunction(o)&&o.call(N)}function u(i){q||(N=i,d(),k=e(N),z=0,"nofollow"!==B.rel&&(k=e("."+et).filter(function(){var t,i=e.data(this,Y);return i&&(t=e(this).data("rel")||i.rel||this.rel),t===B.rel}),z=k.index(N),-1===z&&(k=k.add(N),z=k.length-1)),w.css({opacity:parseFloat(B.opacity),cursor:B.overlayClose?"pointer":"auto",visibility:"visible"}).show(),J&&g.add(w).removeClass(J),B.className&&g.add(w).addClass(B.className),J=B.className,B.closeButton?K.html(B.close).appendTo(y):K.appendTo("<div/>"),U||(U=$=!0,g.css({visibility:"hidden",display:"block"}),H=o(st,"LoadedContent","width:0; height:0; overflow:hidden"),y.css({width:"",height:""}).append(H),O=x.height()+C.height()+y.outerHeight(!0)-y.height(),_=b.width()+T.width()+y.outerWidth(!0)-y.width(),D=H.outerHeight(!0),A=H.outerWidth(!0),B.w=h(B.initialWidth,"x"),B.h=h(B.initialHeight,"y"),H.css({width:"",height:B.h}),Q.position(),c(tt,B.onOpen),P.add(L).hide(),g.focus(),B.trapFocus&&t.addEventListener&&(t.addEventListener("focus",a,!0),lt.one(rt,function(){t.removeEventListener("focus",a,!0)})),B.returnFocus&&lt.one(rt,function(){e(N).focus()})),m())}function f(){!g&&t.body&&(V=!1,E=e(i),g=o(st).attr({id:Y,"class":e.support.opacity===!1?Z+"IE":"",role:"dialog",tabindex:"-1"}).hide(),w=o(st,"Overlay").hide(),F=e([o(st,"LoadingOverlay")[0],o(st,"LoadingGraphic")[0]]),v=o(st,"Wrapper"),y=o(st,"Content").append(L=o(st,"Title"),S=o(st,"Current"),I=e('<button type="button"/>').attr({id:Z+"Previous"}),R=e('<button type="button"/>').attr({id:Z+"Next"}),M=o("button","Slideshow"),F),K=e('<button class="fa" type="button"/>').attr({id:Z+"Close"}),v.append(o(st).append(o(st,"TopLeft"),x=o(st,"TopCenter"),o(st,"TopRight")),o(st,!1,"clear:left").append(b=o(st,"MiddleLeft"),y,T=o(st,"MiddleRight")),o(st,!1,"clear:left").append(o(st,"BottomLeft"),C=o(st,"BottomCenter"),o(st,"BottomRight"))).find("div div").css({"float":"left"}),W=o(st,!1,"position:absolute; width:9999px; visibility:hidden; display:none; max-width:none;"),P=R.add(I).add(S).add(M),e(t.body).append(w,g.append(v,W)))}function p(){function i(e){e.which>1||e.shiftKey||e.altKey||e.metaKey||e.ctrlKey||(e.preventDefault(),u(this))}return g?(V||(V=!0,R.click(function(){Q.next()}),I.click(function(){Q.prev()}),K.click(function(){Q.close()}),w.click(function(){B.overlayClose&&Q.close()}),e(t).bind("keydown."+Z,function(e){var t=e.keyCode;U&&B.escKey&&27===t&&(e.preventDefault(),Q.close()),U&&B.arrowKey&&k[1]&&!e.altKey&&(37===t?(e.preventDefault(),I.click()):39===t&&(e.preventDefault(),R.click()))}),e.isFunction(e.fn.on)?e(t).on("click."+Z,"."+et,i):e("."+et).live("click."+Z,i)),!0):!1}function m(){var n,r,a,u=Q.prep,f=++at;$=!0,j=!1,N=k[z],d(),c(ht),c(it,B.onLoad),B.h=B.height?h(B.height,"y")-D-O:B.innerHeight&&h(B.innerHeight,"y"),B.w=B.width?h(B.width,"x")-A-_:B.innerWidth&&h(B.innerWidth,"x"),B.mw=B.w,B.mh=B.h,B.maxWidth&&(B.mw=h(B.maxWidth,"x")-A-_,B.mw=B.w&&B.w<B.mw?B.w:B.mw),B.maxHeight&&(B.mh=h(B.maxHeight,"y")-D-O,B.mh=B.h&&B.h<B.mh?B.h:B.mh),n=B.href,G=setTimeout(function(){F.show()},100),B.inline?(a=o(st).hide().insertBefore(e(n)[0]),lt.one(ht,function(){a.replaceWith(H.children())}),u(e(n))):B.iframe?u(" "):B.html?u(B.html):l(B,n)?(n=s(B,n),j=t.createElement("img"),e(j).addClass(Z+"Photo").bind("error",function(){B.title=!1,u(o(st,"Error").html(B.imgError))}).one("load",function(){var t;f===at&&(e.each(["alt","longdesc","aria-describedby"],function(t,i){var o=e(N).attr(i)||e(N).attr("data-"+i);o&&j.setAttribute(i,o)}),B.retinaImage&&i.devicePixelRatio>1&&(j.height=j.height/i.devicePixelRatio,j.width=j.width/i.devicePixelRatio),B.scalePhotos&&(r=function(){j.height-=j.height*t,j.width-=j.width*t},B.mw&&j.width>B.mw&&(t=(j.width-B.mw)/j.width,r()),B.mh&&j.height>B.mh&&(t=(j.height-B.mh)/j.height,r())),B.h&&(j.style.marginTop=Math.max(B.mh-j.height,0)/2+"px"),k[1]&&(B.loop||k[z+1])&&(j.style.cursor="pointer",j.onclick=function(){Q.next()}),j.style.width=j.width+"px",j.style.height=j.height+"px",setTimeout(function(){u(j)},1))}),setTimeout(function(){j.src=n},1)):n&&W.load(n,B.data,function(t,i){f===at&&u("error"===i?o(st,"Error").html(B.xhrError):e(this).contents())})}var w,g,v,y,x,b,T,C,k,E,H,W,F,L,S,M,R,I,K,P,B,O,_,D,A,N,z,j,U,$,q,G,Q,J,V,X={html:!1,photo:!1,iframe:!1,inline:!1,transition:"elastic",speed:300,fadeOut:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,href:!1,title:!1,rel:!1,opacity:.9,preloading:!0,className:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:void 0,closeButton:!0,fastIframe:!0,open:!1,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico|webp)((#|\?).*)?$/i,retinaImage:!1,retinaUrl:!1,retinaSuffix:"@2x.$1",current:"image {current} of {total}",previous:"previous",next:"next",close:"",xhrError:"This content failed to load.",imgError:"This image failed to load.",returnFocus:!0,trapFocus:!0,onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1},Y="colorbox",Z="cbox",et=Z+"Element",tt=Z+"_open",it=Z+"_load",ot=Z+"_complete",nt=Z+"_cleanup",rt=Z+"_closed",ht=Z+"_purge",lt=e("<a/>"),st="div",at=0,dt={},ct=function(){function e(){clearTimeout(h)}function t(){(B.loop||k[z+1])&&(e(),h=setTimeout(Q.next,B.slideshowSpeed))}function i(){M.html(B.slideshowStop).unbind(s).one(s,o),lt.bind(ot,t).bind(it,e),g.removeClass(l+"off").addClass(l+"on")}function o(){e(),lt.unbind(ot,t).unbind(it,e),M.html(B.slideshowStart).unbind(s).one(s,function(){Q.next(),i()}),g.removeClass(l+"on").addClass(l+"off")}function n(){r=!1,M.hide(),e(),lt.unbind(ot,t).unbind(it,e),g.removeClass(l+"off "+l+"on")}var r,h,l=Z+"Slideshow_",s="click."+Z;return function(){r?B.slideshow||(lt.unbind(nt,n),n()):B.slideshow&&k[1]&&(r=!0,lt.one(nt,n),B.slideshowAuto?i():o(),M.show())}}();e.colorbox||(e(f),Q=e.fn[Y]=e[Y]=function(t,i){var o=this;if(t=t||{},f(),p()){if(e.isFunction(o))o=e("<a/>"),t.open=!0;else if(!o[0])return o;i&&(t.onComplete=i),o.each(function(){e.data(this,Y,e.extend({},e.data(this,Y)||X,t))}).addClass(et),(e.isFunction(t.open)&&t.open.call(o)||t.open)&&u(o[0])}return o},Q.position=function(t,i){function o(){x[0].style.width=C[0].style.width=y[0].style.width=parseInt(g[0].style.width,10)-_+"px",y[0].style.height=b[0].style.height=T[0].style.height=parseInt(g[0].style.height,10)-O+"px"}var r,l,s,a=0,d=0,c=g.offset();if(E.unbind("resize."+Z),g.css({top:-9e4,left:-9e4}),l=E.scrollTop(),s=E.scrollLeft(),B.fixed?(c.top-=l,c.left-=s,g.css({position:"fixed"})):(a=l,d=s,g.css({position:"absolute"})),d+=B.right!==!1?Math.max(E.width()-B.w-A-_-h(B.right,"x"),0):B.left!==!1?h(B.left,"x"):Math.round(Math.max(E.width()-B.w-A-_,0)/2),a+=B.bottom!==!1?Math.max(n()-B.h-D-O-h(B.bottom,"y"),0):B.top!==!1?h(B.top,"y"):Math.round(Math.max(n()-B.h-D-O,0)/2),g.css({top:c.top,left:c.left,visibility:"visible"}),v[0].style.width=v[0].style.height="9999px",r={width:B.w+A+_,height:B.h+D+O,top:a,left:d},t){var u=0;e.each(r,function(e){return r[e]!==dt[e]?(u=t,void 0):void 0}),t=u}dt=r,t||g.css(r),g.dequeue().animate(r,{duration:t||0,complete:function(){o(),$=!1,v[0].style.width=B.w+A+_+"px",v[0].style.height=B.h+D+O+"px",B.reposition&&setTimeout(function(){E.bind("resize."+Z,Q.position)},1),i&&i()},step:o})},Q.resize=function(e){var t;U&&(e=e||{},e.width&&(B.w=h(e.width,"x")-A-_),e.innerWidth&&(B.w=h(e.innerWidth,"x")),H.css({width:B.w}),e.height&&(B.h=h(e.height,"y")-D-O),e.innerHeight&&(B.h=h(e.innerHeight,"y")),e.innerHeight||e.height||(t=H.scrollTop(),H.css({height:"auto"}),B.h=H.height()),H.css({height:B.h}),t&&H.scrollTop(t),Q.position("none"===B.transition?0:B.speed))},Q.prep=function(i){function n(){return B.w=B.w||H.width(),B.w=B.mw&&B.mw<B.w?B.mw:B.w,B.w}function h(){return B.h=B.h||H.height(),B.h=B.mh&&B.mh<B.h?B.mh:B.h,B.h}if(U){var a,d="none"===B.transition?0:B.speed;H.empty().remove(),H=o(st,"LoadedContent").append(i),H.hide().appendTo(W.show()).css({width:n(),overflow:B.scrolling?"auto":"hidden"}).css({height:h()}).prependTo(y),W.hide(),e(j).css({"float":"none"}),a=function(){function i(){e.support.opacity===!1&&g[0].style.removeAttribute("filter")}var n,h,a=k.length,u="frameBorder",f="allowTransparency";U&&(h=function(){clearTimeout(G),F.hide(),c(ot,B.onComplete)},L.html(B.title).add(H).show(),a>1?("string"==typeof B.current&&S.html(B.current.replace("{current}",z+1).replace("{total}",a)).show(),R[B.loop||a-1>z?"show":"hide"]().html(B.next),I[B.loop||z?"show":"hide"]().html(B.previous),ct(),B.preloading&&e.each([r(-1),r(1)],function(){var i,o,n=k[this],r=e.data(n,Y);r&&r.href?(i=r.href,e.isFunction(i)&&(i=i.call(n))):i=e(n).attr("href"),i&&l(r,i)&&(i=s(r,i),o=t.createElement("img"),o.src=i)})):P.hide(),B.iframe?(n=o("iframe")[0],u in n&&(n[u]=0),f in n&&(n[f]="true"),B.scrolling||(n.scrolling="no"),e(n).attr({src:B.href,name:(new Date).getTime(),"class":Z+"Iframe",allowFullScreen:!0,webkitAllowFullScreen:!0,mozallowfullscreen:!0}).one("load",h).appendTo(H),lt.one(ht,function(){n.src="//about:blank"}),B.fastIframe&&e(n).trigger("load")):h(),"fade"===B.transition?g.fadeTo(d,1,i):i())},"fade"===B.transition?g.fadeTo(d,0,function(){Q.position(0,a)}):Q.position(d,a)}},Q.next=function(){!$&&k[1]&&(B.loop||k[z+1])&&(z=r(1),u(k[z]))},Q.prev=function(){!$&&k[1]&&(B.loop||z)&&(z=r(-1),u(k[z]))},Q.close=function(){U&&!q&&(q=!0,U=!1,c(nt,B.onCleanup),E.unbind("."+Z),w.fadeTo(B.fadeOut||0,0),g.stop().fadeTo(B.fadeOut||0,0,function(){g.add(w).css({opacity:1,cursor:"auto"}).hide(),c(ht),H.empty().remove(),setTimeout(function(){q=!1,c(rt,B.onClosed)},1)}))},Q.remove=function(){g&&(g.stop(),e.colorbox.close(),g.stop().remove(),w.remove(),q=!1,g=null,e("."+et).removeData(Y).removeClass(et),e(t).unbind("click."+Z))},Q.element=function(){return e(N)},Q.settings=X)})(jQuery,document,window);(function(a){a.fn.each2===void 0&&a.fn.extend({each2:function(b){for(var c=a([0]),d=-1,e=this.length;e>++d&&(c.context=c[0]=this[d])&&b.call(c[0],d,c)!==!1;);return this}})})(jQuery),function(a,b){"use strict";function m(a,b){for(var c=0,d=b.length;d>c;c+=1)if(o(a,b[c]))return c;return-1}function n(){var b=a(l);b.appendTo("body");var c={width:b.width()-b[0].clientWidth,height:b.height()-b[0].clientHeight};return b.remove(),c}function o(a,c){return a===c?!0:a===b||c===b?!1:null===a||null===c?!1:a.constructor===String?a+""==c+"":c.constructor===String?c+""==a+"":!1}function p(b,c){var d,e,f;if(null===b||1>b.length)return[];for(d=b.split(c),e=0,f=d.length;f>e;e+=1)d[e]=a.trim(d[e]);return d}function q(a){return a.outerWidth(!1)-a.width()}function r(c){var d="keyup-change-value";c.on("keydown",function(){a.data(c,d)===b&&a.data(c,d,c.val())}),c.on("keyup",function(){var e=a.data(c,d);e!==b&&c.val()!==e&&(a.removeData(c,d),c.trigger("keyup-change"))})}function s(c){c.on("mousemove",function(c){var d=i;(d===b||d.x!==c.pageX||d.y!==c.pageY)&&a(c.target).trigger("mousemove-filtered",c)})}function t(a,c,d){d=d||b;var e;return function(){var b=arguments;window.clearTimeout(e),e=window.setTimeout(function(){c.apply(d,b)},a)}}function u(a){var c,b=!1;return function(){return b===!1&&(c=a(),b=!0),c}}function v(a,b){var c=t(a,function(a){b.trigger("scroll-debounced",a)});b.on("scroll",function(a){m(a.target,b.get())>=0&&c(a)})}function w(a){a[0]!==document.activeElement&&window.setTimeout(function(){var d,b=a[0],c=a.val().length;a.focus(),a.is(":visible")&&b===document.activeElement&&(b.setSelectionRange?b.setSelectionRange(c,c):b.createTextRange&&(d=b.createTextRange(),d.collapse(!1),d.select()))},0)}function x(b){b=a(b)[0];var c=0,d=0;if("selectionStart"in b)c=b.selectionStart,d=b.selectionEnd-c;else if("selection"in document){b.focus();var e=document.selection.createRange();d=document.selection.createRange().text.length,e.moveStart("character",-b.value.length),c=e.text.length-d}return{offset:c,length:d}}function y(a){a.preventDefault(),a.stopPropagation()}function z(a){a.preventDefault(),a.stopImmediatePropagation()}function A(b){if(!h){var c=b[0].currentStyle||window.getComputedStyle(b[0],null);h=a(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:c.fontSize,fontFamily:c.fontFamily,fontStyle:c.fontStyle,fontWeight:c.fontWeight,letterSpacing:c.letterSpacing,textTransform:c.textTransform,whiteSpace:"nowrap"}),h.attr("class","select2-sizer"),a("body").append(h)}return h.text(b.val()),h.width()}function B(b,c,d){var e,g,f=[];e=b.attr("class"),e&&(e=""+e,a(e.split(" ")).each2(function(){0===this.indexOf("select2-")&&f.push(this)})),e=c.attr("class"),e&&(e=""+e,a(e.split(" ")).each2(function(){0!==this.indexOf("select2-")&&(g=d(this),g&&f.push(this))})),b.attr("class",f.join(" "))}function C(a,c,d,e){var f=a.toUpperCase().indexOf(c.toUpperCase()),g=c.length;return 0>f?(d.push(e(a)),b):(d.push(e(a.substring(0,f))),d.push("<span class='select2-match'>"),d.push(e(a.substring(f,f+g))),d.push("</span>"),d.push(e(a.substring(f+g,a.length))),b)}function D(c){var d,e=0,f=null,g=c.quietMillis||100,h=c.url,i=this;return function(j){window.clearTimeout(d),d=window.setTimeout(function(){e+=1;var d=e,g=c.data,k=h,l=c.transport||a.fn.select2.ajaxDefaults.transport,m={type:c.type||"GET",cache:c.cache||!1,jsonpCallback:c.jsonpCallback||b,dataType:c.dataType||"json"},n=a.extend({},a.fn.select2.ajaxDefaults.params,m);g=g?g.call(i,j.term,j.page,j.context):null,k="function"==typeof k?k.call(i,j.term,j.page,j.context):k,null!==f&&f.abort(),c.params&&(a.isFunction(c.params)?a.extend(n,c.params.call(i)):a.extend(n,c.params)),a.extend(n,{url:k,dataType:c.dataType,data:g,success:function(a){if(!(e>d)){var b=c.results(a,j.page);j.callback(b)}}}),f=l.call(i,n)},g)}}function E(c){var e,f,d=c,g=function(a){return""+a.text};a.isArray(d)&&(f=d,d={results:f}),a.isFunction(d)===!1&&(f=d,d=function(){return f});var h=d();return h.text&&(g=h.text,a.isFunction(g)||(e=h.text,g=function(a){return a[e]})),function(c){var h,e=c.term,f={results:[]};return""===e?(c.callback(d()),b):(h=function(b,d){var f,i;if(b=b[0],b.children){f={};for(i in b)b.hasOwnProperty(i)&&(f[i]=b[i]);f.children=[],a(b.children).each2(function(a,b){h(b,f.children)}),(f.children.length||c.matcher(e,g(f),b))&&d.push(f)}else c.matcher(e,g(b),b)&&d.push(b)},a(d().results).each2(function(a,b){h(b,f.results)}),c.callback(f),b)}}function F(c){var d=a.isFunction(c);return function(e){var f=e.term,g={results:[]};a(d?c():c).each(function(){var a=this.text!==b,c=a?this.text:this;(""===f||e.matcher(f,c))&&g.results.push(a?this:{id:this,text:this})}),e.callback(g)}}function G(b){if(a.isFunction(b))return!0;if(!b)return!1;throw Error("formatterName must be a function or a falsy value")}function H(b){return a.isFunction(b)?b():b}function I(b){var c=0;return a.each(b,function(a,b){b.children?c+=I(b.children):c++}),c}function J(a,c,d,e){var h,i,j,k,l,f=a,g=!1;if(!e.createSearchChoice||!e.tokenSeparators||1>e.tokenSeparators.length)return b;for(;;){for(i=-1,j=0,k=e.tokenSeparators.length;k>j&&(l=e.tokenSeparators[j],i=a.indexOf(l),!(i>=0));j++);if(0>i)break;if(h=a.substring(0,i),a=a.substring(i+l.length),h.length>0&&(h=e.createSearchChoice(h,c),h!==b&&null!==h&&e.id(h)!==b&&null!==e.id(h))){for(g=!1,j=0,k=c.length;k>j;j++)if(o(e.id(h),e.id(c[j]))){g=!0;break}g||d(h)}}return f!==a?a:b}function K(b,c){var d=function(){};return d.prototype=new b,d.prototype.constructor=d,d.prototype.parent=b.prototype,d.prototype=a.extend(d.prototype,c),d}if(window.Select2===b){var c,d,e,f,g,h,i,j,k,c={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(a){switch(a=a.which?a.which:a){case c.LEFT:case c.RIGHT:case c.UP:case c.DOWN:return!0}return!1},isControl:function(a){var b=a.which;switch(b){case c.SHIFT:case c.CTRL:case c.ALT:return!0}return a.metaKey?!0:!1},isFunctionKey:function(a){return a=a.which?a.which:a,a>=112&&123>=a}},l="<div class='select2-measure-scrollbar'></div>";j=a(document),g=function(){var a=1;return function(){return a++}}(),j.on("mousemove",function(a){i={x:a.pageX,y:a.pageY}}),d=K(Object,{bind:function(a){var b=this;return function(){a.apply(b,arguments)}},init:function(c){var d,e,h,i,f=".select2-results";this.opts=c=this.prepareOpts(c),this.id=c.id,c.element.data("select2")!==b&&null!==c.element.data("select2")&&this.destroy(),this.container=this.createContainer(),this.containerId="s2id_"+(c.element.attr("id")||"autogen"+g()),this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.body=u(function(){return c.element.closest("body")}),B(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.css(H(c.containerCss)),this.container.addClass(H(c.containerCssClass)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),this.dropdown.addClass(H(c.dropdownCssClass)),this.dropdown.data("select2",this),this.results=d=this.container.find(f),this.search=e=this.container.find("input.select2-input"),this.resultsPage=0,this.context=null,this.initContainer(),s(this.results),this.dropdown.on("mousemove-filtered touchstart touchmove touchend",f,this.bind(this.highlightUnderEvent)),v(80,this.results),this.dropdown.on("scroll-debounced",f,this.bind(this.loadMoreIfNeeded)),a(this.container).on("change",".select2-input",function(a){a.stopPropagation()}),a(this.dropdown).on("change",".select2-input",function(a){a.stopPropagation()}),a.fn.mousewheel&&d.mousewheel(function(a,b,c,e){var f=d.scrollTop();e>0&&0>=f-e?(d.scrollTop(0),y(a)):0>e&&d.get(0).scrollHeight-d.scrollTop()+e<=d.height()&&(d.scrollTop(d.get(0).scrollHeight-d.height()),y(a))}),r(e),e.on("keyup-change input paste",this.bind(this.updateResults)),e.on("focus",function(){e.addClass("select2-focused")}),e.on("blur",function(){e.removeClass("select2-focused")}),this.dropdown.on("mouseup",f,this.bind(function(b){a(b.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(b),this.selectHighlighted(b))})),this.dropdown.on("click mouseup mousedown",function(a){a.stopPropagation()}),a.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==c.maximumInputLength&&this.search.attr("maxlength",c.maximumInputLength);var h=c.element.prop("disabled");h===b&&(h=!1),this.enable(!h);var i=c.element.prop("readonly");i===b&&(i=!1),this.readonly(i),k=k||n(),this.autofocus=c.element.prop("autofocus"),c.element.prop("autofocus",!1),this.autofocus&&this.focus()},destroy:function(){var a=this.opts.element.data("select2");this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),a!==b&&(a.container.remove(),a.dropdown.remove(),a.opts.element.removeClass("select2-offscreen").removeData("select2").off(".select2").attr({tabindex:this.elementTabIndex}).prop("autofocus",this.autofocus||!1).show())},optionToData:function(a){return a.is("option")?{id:a.prop("value"),text:a.text(),element:a.get(),css:a.attr("class"),disabled:a.prop("disabled"),locked:o(a.attr("locked"),"locked")}:a.is("optgroup")?{text:a.attr("label"),children:[],element:a.get(),css:a.attr("class")}:b},prepareOpts:function(c){var d,e,f,g,h=this;if(d=c.element,"select"===d.get(0).tagName.toLowerCase()&&(this.select=e=c.element),e&&a.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in c)throw Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),c=a.extend({},{populateResults:function(d,e,f){var g,l=this.opts.id;g=function(d,e,i){var j,k,m,n,o,p,q,r,s,t;for(d=c.sortResults(d,e,f),j=0,k=d.length;k>j;j+=1)m=d[j],o=m.disabled===!0,n=!o&&l(m)!==b,p=m.children&&m.children.length>0,q=a("<li></li>"),q.addClass("select2-results-dept-"+i),q.addClass("select2-result"),q.addClass(n?"select2-result-selectable":"select2-result-unselectable"),o&&q.addClass("select2-disabled"),p&&q.addClass("select2-result-with-children"),q.addClass(h.opts.formatResultCssClass(m)),r=a(document.createElement("div")),r.addClass("select2-result-label"),t=c.formatResult(m,r,f,h.opts.escapeMarkup),t!==b&&r.html(t),q.append(r),p&&(s=a("<ul></ul>"),s.addClass("select2-result-sub"),g(m.children,s,i+1),q.append(s)),q.data("select2-data",m),e.append(q)},g(e,d,0)}},a.fn.select2.defaults,c),"function"!=typeof c.id&&(f=c.id,c.id=function(a){return a[f]}),a.isArray(c.element.data("select2Tags"))){if("tags"in c)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+c.element.attr("id");c.tags=c.element.data("select2Tags")}if(e?(c.query=this.bind(function(c){var g,i,j,e={results:[],more:!1},f=c.term;j=function(a,b){var d;a.is("option")?c.matcher(f,a.text(),a)&&b.push(h.optionToData(a)):a.is("optgroup")&&(d=h.optionToData(a),a.children().each2(function(a,b){j(b,d.children)}),d.children.length>0&&b.push(d))},g=d.children(),this.getPlaceholder()!==b&&g.length>0&&(i=g[0],""===a(i).text()&&(g=g.not(i))),g.each2(function(a,b){j(b,e.results)}),c.callback(e)}),c.id=function(a){return a.id},c.formatResultCssClass=function(a){return a.css}):"query"in c||("ajax"in c?(g=c.element.data("ajax-url"),g&&g.length>0&&(c.ajax.url=g),c.query=D.call(c.element,c.ajax)):"data"in c?c.query=E(c.data):"tags"in c&&(c.query=F(c.tags),c.createSearchChoice===b&&(c.createSearchChoice=function(a){return{id:a,text:a}}),c.initSelection===b&&(c.initSelection=function(d,e){var f=[];a(p(d.val(),c.separator)).each(function(){var d=this,e=this,g=c.tags;a.isFunction(g)&&(g=g()),a(g).each(function(){return o(this.id,d)?(e=this.text,!1):b}),f.push({id:d,text:e})}),e(f)}))),"function"!=typeof c.query)throw"query function not defined for Select2 "+c.element.attr("id");return c},monitorSource:function(){var c,a=this.opts.element;a.on("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),c=this.bind(function(){var d,f=a.prop("disabled");f===b&&(f=!1),this.enable(!f);var d=a.prop("readonly");d===b&&(d=!1),this.readonly(d),B(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(H(this.opts.containerCssClass)),B(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(H(this.opts.dropdownCssClass))}),a.on("propertychange.select2 DOMAttrModified.select2",c),this.mutationCallback===b&&(this.mutationCallback=function(a){a.forEach(c)}),"undefined"!=typeof WebKitMutationObserver&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new WebKitMutationObserver(this.mutationCallback),this.propertyObserver.observe(a.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(b){var c=a.Event("select2-selecting",{val:this.id(b),object:b});return this.opts.element.trigger(c),!c.isDefaultPrevented()},triggerChange:function(b){b=b||{},b=a.extend({},b,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(b),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var a=this._enabled&&!this._readonly,b=!a;return a===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",b),this.close(),this.enabledInterface=a,!0)},enable:function(a){return a===b&&(a=!0),this._enabled===a?!1:(this._enabled=a,this.opts.element.prop("disabled",!a),this.enableInterface(),!0)},readonly:function(a){return a===b&&(a=!1),this._readonly===a?!1:(this._readonly=a,this.opts.element.prop("readonly",a),this.enableInterface(),!0)},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var q,r,s,t,b=this.dropdown,c=this.container.offset(),d=this.container.outerHeight(!1),e=this.container.outerWidth(!1),f=b.outerHeight(!1),g=a(window).scrollLeft()+a(window).width(),h=a(window).scrollTop()+a(window).height(),i=c.top+d,j=c.left,l=h>=i+f,m=c.top-f>=this.body().scrollTop(),n=b.outerWidth(!1),o=g>=j+n,p=b.hasClass("select2-drop-above");this.opts.dropdownAutoWidth?(t=a(".select2-results",b)[0],b.addClass("select2-drop-auto-width"),b.css("width",""),n=b.outerWidth(!1)+(t.scrollHeight===t.clientHeight?0:k.width),n>e?e=n:n=e,o=g>=j+n):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body().css("position")&&(q=this.body().offset(),i-=q.top,j-=q.left),p?(r=!0,!m&&l&&(r=!1)):(r=!1,!l&&m&&(r=!0)),o||(j=c.left+e-n),r?(i=c.top-f,this.container.addClass("select2-drop-above"),b.addClass("select2-drop-above")):(this.container.removeClass("select2-drop-above"),b.removeClass("select2-drop-above")),s=a.extend({top:i,left:j,width:e},H(this.opts.dropdownCss)),b.css(s)},shouldOpen:function(){var b;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(b=a.Event("select2-opening"),this.opts.element.trigger(b),!b.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),!0):!1},opening:function(){function h(){return{width:Math.max(document.documentElement.scrollWidth,a(window).width()),height:Math.max(document.documentElement.scrollHeight,a(window).height())}}var f,b=this.containerId,c="scroll."+b,d="resize."+b,e="orientationchange."+b;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),f=a("#select2-drop-mask"),0==f.length&&(f=a(document.createElement("div")),f.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),f.hide(),f.appendTo(this.body()),f.on("mousedown touchstart",function(b){var d,c=a("#select2-drop");c.length>0&&(d=c.data("select2"),d.opts.selectOnBlur&&d.selectHighlighted({noFocus:!0}),d.close(),b.preventDefault(),b.stopPropagation())})),this.dropdown.prev()[0]!==f[0]&&this.dropdown.before(f),a("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),f.css(h()),f.show(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active"),this.ensureHighlightVisible();var g=this;this.container.parents().add(window).each(function(){a(this).on(d+" "+c+" "+e,function(){a("#select2-drop-mask").css(h()),g.positionDropdown()})})},close:function(){if(this.opened()){var b=this.containerId,c="scroll."+b,d="resize."+b,e="orientationchange."+b;this.container.parents().add(window).each(function(){a(this).off(c).off(d).off(e)}),this.clearDropdownAlignmentPreference(),a("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open"),this.results.empty(),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(a.Event("select2-close"))}},clearSearch:function(){},getMaximumSelectionSize:function(){return H(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var d,e,f,g,h,i,j,c=this.results;if(e=this.highlight(),!(0>e)){if(0==e)return c.scrollTop(0),b;d=this.findHighlightableChoices().find(".select2-result-label"),f=a(d[e]),g=f.offset().top+f.outerHeight(!0),e===d.length-1&&(j=c.find("li.select2-more-results"),j.length>0&&(g=j.offset().top+j.outerHeight(!0))),h=c.offset().top+c.outerHeight(!0),g>h&&c.scrollTop(c.scrollTop()+(g-h)),i=f.offset().top-c.offset().top,0>i&&"none"!=f.css("display")&&c.scrollTop(c.scrollTop()+i)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-selected):not(.select2-disabled)")},moveHighlight:function(b){for(var c=this.findHighlightableChoices(),d=this.highlight();d>-1&&c.length>d;){d+=b;var e=a(c[d]);if(e.hasClass("select2-result-selectable")&&!e.hasClass("select2-disabled")&&!e.hasClass("select2-selected")){this.highlight(d);break}}},highlight:function(c){var e,f,d=this.findHighlightableChoices();return 0===arguments.length?m(d.filter(".select2-highlighted")[0],d.get()):(c>=d.length&&(c=d.length-1),0>c&&(c=0),this.results.find(".select2-highlighted").removeClass("select2-highlighted"),e=a(d[c]),e.addClass("select2-highlighted"),this.ensureHighlightVisible(),f=e.data("select2-data"),f&&this.opts.element.trigger({type:"select2-highlight",val:this.id(f),choice:f}),b)},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(b){var c=a(b.target).closest(".select2-result-selectable");if(c.length>0&&!c.is(".select2-highlighted")){var d=this.findHighlightableChoices();this.highlight(d.index(c))}else 0==c.length&&this.results.find(".select2-highlighted").removeClass("select2-highlighted")},loadMoreIfNeeded:function(){var c,a=this.results,b=a.find("li.select2-more-results"),e=this.resultsPage+1,f=this,g=this.search.val(),h=this.context;0!==b.length&&(c=b.offset().top-a.offset().top-a.height(),this.opts.loadMorePadding>=c&&(b.addClass("select2-active"),this.opts.query({element:this.opts.element,term:g,page:e,context:h,matcher:this.opts.matcher,callback:this.bind(function(c){f.opened()&&(f.opts.populateResults.call(this,a,c.results,{term:g,page:e,context:h}),f.postprocessResults(c,!1,!1),c.more===!0?(b.detach().appendTo(a).text(f.opts.formatLoadMore(e+1)),window.setTimeout(function(){f.loadMoreIfNeeded()},10)):b.remove(),f.positionDropdown(),f.resultsPage=e,f.context=c.context)})})))},tokenize:function(){},updateResults:function(c){function l(){e.scrollTop(0),d.removeClass("select2-active"),h.positionDropdown()}function m(a){e.html(a),l()}var g,i,d=this.search,e=this.results,f=this.opts,h=this,j=d.val(),k=a.data(this.container,"select2-last-term");if((c===!0||!k||!o(j,k))&&(a.data(this.container,"select2-last-term",j),c===!0||this.showSearchInput!==!1&&this.opened())){var n=this.getMaximumSelectionSize();if(n>=1&&(g=this.data(),a.isArray(g)&&g.length>=n&&G(f.formatSelectionTooBig,"formatSelectionTooBig")))return m("<li class='select2-selection-limit'>"+f.formatSelectionTooBig(n)+"</li>"),b;if(d.val().length<f.minimumInputLength)return G(f.formatInputTooShort,"formatInputTooShort")?m("<li class='select2-no-results'>"+f.formatInputTooShort(d.val(),f.minimumInputLength)+"</li>"):m(""),c&&this.showSearch(!0),b;if(f.maximumInputLength&&d.val().length>f.maximumInputLength)return G(f.formatInputTooLong,"formatInputTooLong")?m("<li class='select2-no-results'>"+f.formatInputTooLong(d.val(),f.maximumInputLength)+"</li>"):m(""),b;f.formatSearching&&0===this.findHighlightableChoices().length&&m("<li class='select2-searching'>"+f.formatSearching()+"</li>"),d.addClass("select2-active"),i=this.tokenize(),i!=b&&null!=i&&d.val(i),this.resultsPage=1,f.query({element:f.element,term:d.val(),page:this.resultsPage,context:null,matcher:f.matcher,callback:this.bind(function(g){var i;return this.opened()?(this.context=g.context===b?null:g.context,this.opts.createSearchChoice&&""!==d.val()&&(i=this.opts.createSearchChoice.call(null,d.val(),g.results),i!==b&&null!==i&&h.id(i)!==b&&null!==h.id(i)&&0===a(g.results).filter(function(){return o(h.id(this),h.id(i))}).length&&g.results.unshift(i)),0===g.results.length&&G(f.formatNoMatches,"formatNoMatches")?(m("<li class='select2-no-results'>"+f.formatNoMatches(d.val())+"</li>"),b):(e.empty(),h.opts.populateResults.call(this,e,g.results,{term:d.val(),page:this.resultsPage,context:null}),g.more===!0&&G(f.formatLoadMore,"formatLoadMore")&&(e.append("<li class='select2-more-results'>"+h.opts.escapeMarkup(f.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){h.loadMoreIfNeeded()},10)),this.postprocessResults(g,c),l(),this.opts.element.trigger({type:"select2-loaded",data:g}),b)):(this.search.removeClass("select2-active"),b)})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){w(this.search)},selectHighlighted:function(a){var b=this.highlight(),c=this.results.find(".select2-highlighted"),d=c.closest(".select2-result").data("select2-data");d&&(this.highlight(b),this.onSelect(d,a))},getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},initContainerWidth:function(){function c(){var c,d,e,f,g;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(c=this.opts.element.attr("style"),c!==b)for(d=c.split(";"),f=0,g=d.length;g>f;f+=1)if(e=d[f].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==e&&e.length>=1)return e[1];return c=this.opts.element.css("width"),c&&c.length>0?c:"resolve"===this.opts.width?0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}return a.isFunction(this.opts.width)?this.opts.width():this.opts.width}var d=c.call(this);null!==d&&this.container.css("width",d)}}),e=K(d,{createContainer:function(){var b=a(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>","   <span>&nbsp;</span><abbr class='select2-search-choice-close'></abbr>","   <div><b></b></div>","</a>","<input class='select2-focusser select2-offscreen' type='text'/>","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' autocorrect='off' autocapitilize='off' spellcheck='false' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return b},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var b,c;this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.search.focus(),b=this.search.get(0),b.createTextRange&&(c=b.createTextRange(),c.collapse(!1),c.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(a.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.removeAttr("disabled"),this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.removeAttr("disabled"),this.focusser.focus()},initContainer:function(){var d,e=this.container,f=this.dropdown;this.showSearch(!1),this.selection=d=e.find(".select2-choice"),this.focusser=e.find(".select2-focusser"),this.focusser.attr("id","s2id_autogen"+g()),a("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id")),this.focusser.attr("tabindex",this.elementTabIndex),this.search.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled()){if(a.which===c.PAGE_UP||a.which===c.PAGE_DOWN)return y(a),b;switch(a.which){case c.UP:case c.DOWN:return this.moveHighlight(a.which===c.UP?-1:1),y(a),b;case c.ENTER:return this.selectHighlighted(),y(a),b;case c.TAB:return this.selectHighlighted({noFocus:!0}),b;case c.ESC:return this.cancel(a),y(a),b}}})),this.search.on("blur",this.bind(function(){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind(function(){this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(a){return!this.isInterfaceEnabled()||a.which===c.TAB||c.isControl(a)||c.isFunctionKey(a)||a.which===c.ESC?b:this.opts.openOnEnter===!1&&a.which===c.ENTER?(y(a),b):a.which==c.DOWN||a.which==c.UP||a.which==c.ENTER&&this.opts.openOnEnter?(this.open(),y(a),b):a.which==c.DELETE||a.which==c.BACKSPACE?(this.opts.allowClear&&this.clear(),y(a),b):b})),r(this.focusser),this.focusser.on("keyup-change input",this.bind(function(a){a.stopPropagation(),this.opened()||this.open()})),d.on("mousedown","abbr",this.bind(function(a){this.isInterfaceEnabled()&&(this.clear(),z(a),this.close(),this.selection.focus())})),d.on("mousedown",this.bind(function(b){this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),y(b)})),f.on("mousedown",this.bind(function(){this.search.focus()})),d.on("focus",this.bind(function(a){y(a)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(a.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(a){var b=this.selection.data("select2-data");b&&(this.opts.element.val(""),this.selection.find("span").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),a!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(b),choice:b}),this.triggerChange({removed:b})))},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text())this.updateSelection([]),this.close(),this.setPlaceholder();else{var c=this;this.opts.initSelection.call(null,this.opts.element,function(a){a!==b&&null!==a&&(c.updateSelection(a),c.close(),c.setPlaceholder())})}},prepareOpts:function(){var b=this.parent.prepareOpts.apply(this,arguments),c=this;return"select"===b.element.get(0).tagName.toLowerCase()?b.initSelection=function(a,b){var d=a.find(":selected");b(c.optionToData(d))}:"data"in b&&(b.initSelection=b.initSelection||function(c,d){var e=c.val(),f=null;b.query({matcher:function(a,c,d){var g=o(e,b.id(d));return g&&(f=d),g},callback:a.isFunction(d)?function(){d(f)}:a.noop})}),b},getPlaceholder:function(){return this.select&&""!==this.select.find("option").first().text()?b:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var a=this.getPlaceholder();if(""===this.opts.element.val()&&a!==b){if(this.select&&""!==this.select.find("option:first").text())return;this.selection.find("span").html(this.opts.escapeMarkup(a)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(a,c,d){var e=0,f=this;if(this.findHighlightableChoices().each2(function(a,c){return o(f.id(c.data("select2-data")),f.opts.element.val())?(e=a,!1):b}),d!==!1&&this.highlight(e),c===!0&&this.showSearchInput===!1){var h=this.opts.minimumResultsForSearch;h>=0&&this.showSearch(I(a.results)>=h)}},showSearch:function(b){this.showSearchInput=b,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!b),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!b),a(this.dropdown,this.container).toggleClass("select2-with-searchbox",b)},onSelect:function(a,b){if(this.triggerSelect(a)){var c=this.opts.element.val(),d=this.data();this.opts.element.val(this.id(a)),this.updateSelection(a),this.opts.element.trigger({type:"select2-selected",val:this.id(a),choice:a}),this.close(),b&&b.noFocus||this.selection.focus(),o(c,this.id(a))||this.triggerChange({added:a,removed:d})}},updateSelection:function(a){var d,c=this.selection.find("span");this.selection.data("select2-data",a),c.empty(),d=this.opts.formatSelection(a,c),d!==b&&c.append(this.opts.escapeMarkup(d)),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==b&&this.container.addClass("select2-allowclear")},val:function(){var a,c=!1,d=null,e=this,f=this.data();if(0===arguments.length)return this.opts.element.val();if(a=arguments[0],arguments.length>1&&(c=arguments[1]),this.select)this.select.val(a).find(":selected").each2(function(a,b){return d=e.optionToData(b),!1}),this.updateSelection(d),this.setPlaceholder(),c&&this.triggerChange({added:d,removed:f});else{if(this.opts.initSelection===b)throw Error("cannot call val() if initSelection() is not defined");if(!a&&0!==a)return this.clear(c),b;this.opts.element.val(a),this.opts.initSelection(this.opts.element,function(a){e.opts.element.val(a?e.id(a):""),e.updateSelection(a),e.setPlaceholder(),c&&e.triggerChange({added:a,removed:f})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(a,c){var d;return 0===arguments.length?(d=this.selection.data("select2-data"),d==b&&(d=null),d):(a&&""!==a?(d=this.data(),this.opts.element.val(a?this.id(a):""),this.updateSelection(a),c&&this.triggerChange({added:a,removed:d})):this.clear(c),b)}}),f=K(d,{createContainer:function(){var b=a(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["    <ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' autocorrect='off' autocapitilize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return b},prepareOpts:function(){var b=this.parent.prepareOpts.apply(this,arguments),c=this;return"select"===b.element.get(0).tagName.toLowerCase()?b.initSelection=function(a,b){var d=[];a.find(":selected").each2(function(a,b){d.push(c.optionToData(b))}),b(d)}:"data"in b&&(b.initSelection=b.initSelection||function(c,d){var e=p(c.val(),b.separator),f=[];b.query({matcher:function(c,d,g){var h=a.grep(e,function(a){return o(a,b.id(g))}).length;return h&&f.push(g),h},callback:a.isFunction(d)?function(){for(var a=[],c=0;e.length>c;c++)for(var g=e[c],h=0;f.length>h;h++){var i=f[h];if(o(g,b.id(i))){a.push(i),f.splice(h,1);break}}d(a)}:a.noop})}),b},selectChoice:function(a){var b=this.container.find(".select2-search-choice-focus");b.length&&a&&a[0]==b[0]||(b.length&&this.opts.element.trigger("choice-deselected",b),b.removeClass("select2-search-choice-focus"),a&&a.length&&(this.close(),a.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",a)))},initContainer:function(){var e,d=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=e=this.container.find(d);var f=this;this.selection.on("mousedown",".select2-search-choice",function(){f.search[0].focus(),f.selectChoice(a(this))}),this.search.attr("id","s2id_autogen"+g()),a("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled()){++this.keydowns;var d=e.find(".select2-search-choice-focus"),f=d.prev(".select2-search-choice:not(.select2-locked)"),g=d.next(".select2-search-choice:not(.select2-locked)"),h=x(this.search);if(d.length&&(a.which==c.LEFT||a.which==c.RIGHT||a.which==c.BACKSPACE||a.which==c.DELETE||a.which==c.ENTER)){var i=d;return a.which==c.LEFT&&f.length?i=f:a.which==c.RIGHT?i=g.length?g:null:a.which===c.BACKSPACE?(this.unselect(d.first()),this.search.width(10),i=f.length?f:g):a.which==c.DELETE?(this.unselect(d.first()),this.search.width(10),i=g.length?g:null):a.which==c.ENTER&&(i=null),this.selectChoice(i),y(a),i&&i.length||this.open(),b}if((a.which===c.BACKSPACE&&1==this.keydowns||a.which==c.LEFT)&&0==h.offset&&!h.length)return this.selectChoice(e.find(".select2-search-choice:not(.select2-locked)").last()),y(a),b;if(this.selectChoice(null),this.opened())switch(a.which){case c.UP:case c.DOWN:return this.moveHighlight(a.which===c.UP?-1:1),y(a),b;case c.ENTER:return this.selectHighlighted(),y(a),b;case c.TAB:return this.selectHighlighted({noFocus:!0}),b;case c.ESC:return this.cancel(a),y(a),b}if(a.which!==c.TAB&&!c.isControl(a)&&!c.isFunctionKey(a)&&a.which!==c.BACKSPACE&&a.which!==c.ESC){if(a.which===c.ENTER){if(this.opts.openOnEnter===!1)return;if(a.altKey||a.ctrlKey||a.shiftKey||a.metaKey)return}this.open(),(a.which===c.PAGE_UP||a.which===c.PAGE_DOWN)&&y(a),a.which===c.ENTER&&y(a)}}})),this.search.on("keyup",this.bind(function(){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(b){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),b.stopImmediatePropagation(),this.opts.element.trigger(a.Event("select2-blur"))})),this.container.on("mousedown",d,this.bind(function(b){this.isInterfaceEnabled()&&(a(b.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.open(),this.focusSearch(),b.preventDefault()))})),this.container.on("focus",d,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var c=this;this.opts.initSelection.call(null,this.opts.element,function(a){a!==b&&null!==a&&(c.updateSelection(a),c.close(),c.clearSearch())})}},clearSearch:function(){var a=this.getPlaceholder(),c=this.getMaxSearchWidth();a!==b&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(a).addClass("select2-default"),this.search.width(c>0?c:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.updateResults(!0),this.search.focus(),this.opts.element.trigger(a.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(b){var c=[],d=[],e=this;a(b).each(function(){0>m(e.id(this),c)&&(c.push(e.id(this)),d.push(this))}),b=d,this.selection.find(".select2-search-choice").remove(),a(b).each(function(){e.addSelectedChoice(this)}),e.postprocessResults()},tokenize:function(){var a=this.search.val();a=this.opts.tokenizer(a,this.data(),this.bind(this.onSelect),this.opts),null!=a&&a!=b&&(this.search.val(a),a.length>0&&this.open())},onSelect:function(a,b){this.triggerSelect(a)&&(this.addSelectedChoice(a),this.opts.element.trigger({type:"selected",val:this.id(a),choice:a}),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:a}),b&&b.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(c){var j,d=!c.locked,e=a("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),f=a("<li class='select2-search-choice select2-locked'><div></div></li>"),g=d?e:f,h=this.id(c),i=this.getVal();j=this.opts.formatSelection(c,g.find("div")),j!=b&&g.find("div").replaceWith("<div title='"+this.opts.escapeMarkup(j)+"'>"+this.opts.escapeMarkup(j)+"</div>"),d&&g.find(".select2-search-choice-close").on("mousedown",y).on("click dblclick",this.bind(function(b){this.isInterfaceEnabled()&&(a(b.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(a(b.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.close(),this.focusSearch()})).dequeue(),y(b))})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),g.data("select2-data",c),g.insertBefore(this.searchContainer),i.push(h),this.setVal(i)},unselect:function(a){var c,d,b=this.getVal();if(a=a.closest(".select2-search-choice"),0===a.length)throw"Invalid argument: "+a+". Must be .select2-search-choice";c=a.data("select2-data"),c&&(d=m(this.id(c),b),d>=0&&(b.splice(d,1),this.setVal(b),this.select&&this.postprocessResults()),a.remove(),this.opts.element.trigger({type:"removed",val:this.id(c),choice:c}),this.triggerChange({removed:c}))},postprocessResults:function(a,b,c){var d=this.getVal(),e=this.results.find(".select2-result"),f=this.results.find(".select2-result-with-children"),g=this;e.each2(function(a,b){var c=g.id(b.data("select2-data"));m(c,d)>=0&&(b.addClass("select2-selected"),b.find(".select2-result-selectable").addClass("select2-selected"))}),f.each2(function(a,b){b.is(".select2-result-selectable")||0!==b.find(".select2-result-selectable:not(.select2-selected)").length||b.addClass("select2-selected")}),-1==this.highlight()&&c!==!1&&g.highlight(0),!this.opts.createSearchChoice&&!e.filter(".select2-result:not(.select2-selected)").length>0&&this.results.append("<li class='select2-no-results'>"+g.opts.formatNoMatches(g.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-q(this.search)},resizeSearch:function(){var a,b,c,d,e,f=q(this.search);a=A(this.search)+10,b=this.search.offset().left,c=this.selection.width(),d=this.selection.offset().left,e=c-(b-d)-f,a>e&&(e=c-f),40>e&&(e=c-f),0>=e&&(e=a),this.search.width(e)},getVal:function(){var a;return this.select?(a=this.select.val(),null===a?[]:a):(a=this.opts.element.val(),p(a,this.opts.separator))},setVal:function(b){var c;this.select?this.select.val(b):(c=[],a(b).each(function(){0>m(this,c)&&c.push(this)}),this.opts.element.val(0===c.length?"":c.join(this.opts.separator)))},buildChangeDetails:function(a,b){for(var b=b.slice(0),a=a.slice(0),c=0;b.length>c;c++)for(var d=0;a.length>d;d++)o(this.opts.id(b[c]),this.opts.id(a[d]))&&(b.splice(c,1),c--,a.splice(d,1),d--);return{added:b,removed:a}},val:function(c,d){var e,f=this;if(0===arguments.length)return this.getVal();if(e=this.data(),e.length||(e=[]),!c&&0!==c)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),d&&this.triggerChange({added:this.data(),removed:e}),b;if(this.setVal(c),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),d&&this.triggerChange(this.buildChangeDetails(e,this.data()));else{if(this.opts.initSelection===b)throw Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(b){var c=a(b).map(f.id);f.setVal(c),f.updateSelection(b),f.clearSearch(),d&&f.triggerChange(this.buildChangeDetails(e,this.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var b=[],c=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){b.push(c.opts.id(a(this).data("select2-data")))}),this.setVal(b),this.triggerChange()},data:function(c,d){var f,g,e=this;return 0===arguments.length?this.selection.find(".select2-search-choice").map(function(){return a(this).data("select2-data")}).get():(g=this.data(),c||(c=[]),f=a.map(c,function(a){return e.opts.id(a)}),this.setVal(f),this.updateSelection(c),this.clearSearch(),d&&this.triggerChange(this.buildChangeDetails(g,this.data())),b)}}),a.fn.select2=function(){var d,g,h,i,c=Array.prototype.slice.call(arguments,0),j=["val","destroy","opened","open","close","focus","isFocused","container","onSortStart","onSortEnd","enable","readonly","positionDropdown","data"],k=["val","opened","isFocused","container","data"];return this.each(function(){if(0===c.length||"object"==typeof c[0])d=0===c.length?{}:a.extend({},c[0]),d.element=a(this),"select"===d.element.get(0).tagName.toLowerCase()?i=d.element.prop("multiple"):(i=d.multiple||!1,"tags"in d&&(d.multiple=i=!0)),g=i?new f:new e,g.init(d);else{if("string"!=typeof c[0])throw"Invalid arguments to select2 plugin: "+c;if(0>m(c[0],j))throw"Unknown method: "+c[0];if(h=b,g=a(this).data("select2"),g===b)return;if(h="container"===c[0]?g.container:g[c[0]].apply(g,c.slice(1)),m(c[0],k)>=0)return!1}}),h===b?this:h},a.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(a,b,c,d){var e=[];return C(a.text,c.term,e,d),e.join("")},formatSelection:function(a){return a?a.text:b},sortResults:function(a){return a},formatResultCssClass:function(){return b},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(a,b){var c=b-a.length;return"Please enter "+c+" more character"+(1==c?"":"s")},formatInputTooLong:function(a,b){var c=a.length-b;return"Please delete "+c+" character"+(1==c?"":"s")},formatSelectionTooBig:function(a){return"You can only select "+a+" item"+(1==a?"":"s")},formatLoadMore:function(){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(a){return a.id},matcher:function(a,b){return(""+b).toUpperCase().indexOf((""+a).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:J,escapeMarkup:function(a){var b={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return(a+"").replace(/[&<>"'\/\\]/g,function(a){return b[a]})},blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(a){return a},adaptDropdownCssClass:function(){return null}},a.fn.select2.ajaxDefaults={transport:a.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:D,local:E,tags:F},util:{debounce:t,markMatch:C},"class":{"abstract":d,single:e,multi:f}}}}(jQuery);(function($){var current_modal=null;$.fn.modal=function(options){var $elm=$(this);if($elm.attr('href')){$elm.click(open_modal_from_link);return;}
options=$.extend({},$.fn.modal.defaults,options);function block(){current_modal.blocker=$('<div class="jquery-modal blocker"></div>').css({top:0,right:0,bottom:0,left:0,width:"100%",height:"100%",position:"fixed",zIndex:options.zIndex,background:options.overlay,opacity:options.opacity});if(options.escapeClose){$(document).bind('keydown.modal',function(event){if(event.which==27){$.fn.modal.close();}});}
if(options.clickClose){current_modal.blocker.click($.fn.modal.close);}
$('body').append(current_modal.blocker);$elm.trigger($.fn.modal.BLOCK,[current_modal]);}
function show(){center_modal(current_modal);if(options.showClose){current_modal.closeButton=$('<a href="#close-modal" rel="modal:close" class="close-modal">'+options.closeText+'</a>');current_modal.elm.append(current_modal.closeButton);}
$elm.addClass(options.modalClass+' current').show();$elm.trigger($.fn.modal.OPEN,[current_modal]);}
current_modal={elm:$elm,options:options};$elm.trigger($.fn.modal.BEFORE_BLOCK,[current_modal]);block();$elm.trigger($.fn.modal.BEFORE_OPEN,[current_modal]);show();};$.fn.modal.defaults={overlay:"#fff",opacity:0.75,zIndex:1000,escapeClose:true,clickClose:true,closeText:'Close',modalClass:"modal",showClose:true};$.fn.modal.BEFORE_BLOCK='modal:before-block';$.fn.modal.BLOCK='modal:block';$.fn.modal.BEFORE_OPEN='modal:before-open';$.fn.modal.OPEN='modal:open';$.fn.modal.BEFORE_CLOSE='modal:before-close';$.fn.modal.CLOSE='modal:close';$.fn.modal.close=function(event){if(event){event.preventDefault();}
if(!current_modal){return;}
current_modal.elm.trigger($.fn.modal.BEFORE_CLOSE,[current_modal]);if(current_modal.closeButton){current_modal.closeButton.remove();}
current_modal.blocker.remove();current_modal.elm.removeClass('current').hide();current_modal.elm.trigger($.fn.modal.CLOSE,[current_modal]);current_modal=null;$(document).unbind('keydown.modal');};$.fn.modal.resize=function(){center_modal(current_modal);};function open_modal_from_link(event){event.preventDefault();var target=$(this).attr('href');if(/^#/.test(target)){$(target).modal();}else{$.get(target,{},function(html){$('<div/>').html(html).appendTo('body').bind('modal:close',function(event,modal){modal.elm.remove();}).modal();});}}
function center_modal(modal){modal.elm.css({position:'fixed',top:"50%",left:"50%",marginTop:-(modal.elm.outerHeight()/2),marginLeft:-(modal.elm.outerWidth()/2),zIndex:modal.options.zIndex+1});};$('a[rel="modal:open"]').on('click',open_modal_from_link);$('a[rel="modal:close"]').on('click',$.fn.modal.close);})(jQuery);(function($){'use strict';var console=window.console||function(){},h5={defaults:{debug:false,RODom:false,patternLibrary:{phone:/([\+][0-9]{1,3}([ \.\-])?)?([\(][0-9]{1,6}[\)])?([0-9A-Za-z \.\-]{1,32})(([A-Za-z \:]{1,11})?[0-9]{1,4}?)/,email:/((([a-zA-Z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-zA-Z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?/,url:/(https?|ftp):\/\/(((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?/,number:/-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?/,dateISO:/\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}/,alpha:/[a-zA-Z]+/,alphaNumeric:/\w+/,integer:/-?\d+/},classPrefix:'h5-',errorClass:'ui-state-error',validClass:'ui-state-valid',activeClass:'active',requiredClass:'required',requiredAttribute:'required',patternAttribute:'pattern',errorAttribute:'data-h5-errorid',customEvents:{'validate':true},kbSelectors:':input:not(:button):not(:disabled):not(.novalidate)',focusout:true,focusin:false,change:true,keyup:false,activeKeyup:true,mSelectors:'[type="range"]:not(:disabled):not(.novalidate), :radio:not(:disabled):not(.novalidate), :checkbox:not(:disabled):not(.novalidate), select:not(:disabled):not(.novalidate), option:not(:disabled):not(.novalidate)',click:true,requiredVar:'h5-required',patternVar:'h5-pattern',stripMarkup:true,submit:true,focusFirstInvalidElementOnSubmit:true,validateOnSubmit:true,invalidCallback:function(){},validCallback:function(){},allValidSelectors:':input:visible:not(:button):not(:disabled):not(.novalidate)',markInvalid:function markInvalid(options){var $element=$(options.element),$errorID=$(options.errorID);$element.addClass(options.errorClass).removeClass(options.validClass);$element.addClass(options.settings.activeClass);if($errorID.length){if($element.attr('title')){$errorID.text($element.attr('title'));}
$errorID.show();}
$element.data('valid',false);options.settings.invalidCallback.call(options.element,options.validity);return $element;},markValid:function markValid(options){var $element=$(options.element),$errorID=$(options.errorID);$element.addClass(options.validClass).removeClass(options.errorClass);if($errorID.length){$errorID.hide();}
$element.data('valid',true);options.settings.validCallback.call(options.element,options.validity);return $element;},unmark:function unmark(options){var $element=$(options.element);$element.removeClass(options.errorClass).removeClass(options.validClass);$element.form.find("#"+options.element.id).removeClass(options.errorClass).removeClass(options.validClass);return $element;}}},defaults=h5.defaults,patternLibrary=defaults.patternLibrary,createValidity=function createValidity(validity){return $.extend({customError:validity.customError||false,patternMismatch:validity.patternMismatch||false,rangeOverflow:validity.rangeOverflow||false,rangeUnderflow:validity.rangeUnderflow||false,stepMismatch:validity.stepMismatch||false,tooLong:validity.tooLong||false,typeMismatch:validity.typeMismatch||false,valid:validity.valid||true,valueMissing:validity.valueMissing||false},validity);},methods={isValid:function(settings,options){var $this=$(this);options=(settings&&options)||{};if(options.revalidate!==false){$this.trigger('validate');}
return $this.data('valid');},allValid:function(config,options){var valid=true,formValidity=[],$this=$(this),$allFields,$filteredFields,radioNames=[],getValidity=function getValidity(e,data){data.e=e;formValidity.push(data);},settings=$.extend({},config,options);options=options||{};$this.trigger('formValidate',{settings:$.extend(true,{},settings)});$this.undelegate(settings.allValidSelectors,'.allValid',getValidity);$this.delegate(settings.allValidSelectors,'validated.allValid',getValidity);$allFields=$this.find(settings.allValidSelectors);$filteredFields=$allFields.filter(function(index){var name;if(this.tagName==="INPUT"&&this.type==="radio"){name=this.name;if(radioNames[name]===true){return false;}
radioNames[name]=true;}
return true;});$filteredFields.each(function(){var $this=$(this);valid=$this.h5Validate('isValid',options)&&valid;});$this.trigger('formValidated',{valid:valid,elements:formValidity});return valid;},validate:function(settings){var $this=$(this),pattern=$this.filter('[pattern]')[0]?$this.attr('pattern'):false,re=new RegExp('^(?:'+pattern+')$'),$radiosWithSameName=null,value=($this.is('[type=checkbox]'))?$this.is(':checked'):($this.is('[type=radio]')?($radiosWithSameName=$this.parents('form').find('input[name="'+$this.attr('name')+'"]')).filter(':checked').length>0:$this.val()),errorClass=settings.errorClass,validClass=settings.validClass,errorIDbare=$this.attr(settings.errorAttribute)||false,errorID=errorIDbare?'#'+errorIDbare.replace(/(:|\.|\[|\])/g,'\\$1'):false,required=false,validity=createValidity({element:this,valid:true}),$checkRequired=$('<input required>'),maxlength;if($checkRequired.filter('[required]')&&$checkRequired.filter('[required]').length){required=($this.filter('[required]').length&&$this.attr('required')!=='false');}else{required=($this.attr('required')!==undefined);}
if(settings.debug&&window.console){console.log('Validate called on "'+value+'" with regex "'+re+'". Required: '+required);console.log('Regex test: '+re.test(value)+', Pattern: '+pattern);}
maxlength=parseInt($this.attr('maxlength'),10);if(!isNaN(maxlength)&&value.length>maxlength){validity.valid=false;validity.tooLong=true;}
if(required&&!value){validity.valid=false;validity.valueMissing=true;}else if(pattern&&!re.test(value)&&value){validity.valid=false;validity.patternMismatch=true;}else{if(!settings.RODom){settings.markValid({element:this,validity:validity,errorClass:errorClass,validClass:validClass,errorID:errorID,settings:settings});}}
if(!validity.valid){if(!settings.RODom){settings.markInvalid({element:this,validity:validity,errorClass:errorClass,validClass:validClass,errorID:errorID,settings:settings});}}
$this.trigger('validated',validity);if($radiosWithSameName!==null&&settings.alreadyCheckingRelatedRadioButtons!==true){settings.alreadyCheckingRelatedRadioButtons=true;$radiosWithSameName.not($this).trigger('validate');settings.alreadyCheckingRelatedRadioButtons=false;}},delegateEvents:function(selectors,eventFlags,element,settings){var events={},key=0,validate=function(){settings.validate.call(this,settings);};$.each(eventFlags,function(key,value){if(value){events[key]=key;}});for(key in events){if(events.hasOwnProperty(key)){$(element).delegate(selectors,events[key]+'.h5Validate',validate);}}
return element;},bindDelegation:function(settings){var $this=$(this),$forms;$.each(patternLibrary,function(key,value){var pattern=value.toString();pattern=pattern.substring(1,pattern.length-1);$('.'+settings.classPrefix+key).attr('pattern',pattern);});$forms=$this.filter('form').add($this.find('form')).add($this.parents('form'));$forms.attr('novalidate','novalidate').submit(checkValidityOnSubmitHandler);$forms.find("input[formnovalidate][type='submit']").click(function(){$(this).closest("form").unbind('submit',checkValidityOnSubmitHandler);});return this.each(function(){var kbEvents={focusout:settings.focusout,focusin:settings.focusin,change:settings.change,keyup:settings.keyup},mEvents={click:settings.click},activeEvents={keyup:settings.activeKeyup};settings.delegateEvents(':input',settings.customEvents,this,settings);settings.delegateEvents(settings.kbSelectors,kbEvents,this,settings);settings.delegateEvents(settings.mSelectors,mEvents,this,settings);settings.delegateEvents(settings.activeClassSelector,activeEvents,this,settings);settings.delegateEvents('textarea[maxlength]',{keyup:true},this,settings);});}},checkValidityOnSubmitHandler=function(evt){var $this,settings=getInstance.call(this),allValid;if(settings.submit!==true){return;}
$this=$(this);allValid=$this.h5Validate('allValid',{revalidate:settings.validateOnSubmit===true});if(allValid!==true){evt.preventDefault();if(settings.focusFirstInvalidElementOnSubmit===true){var $invalid=$(settings.allValidSelectors,$this).filter(function(index){return $(this).h5Validate('isValid',{revalidate:false})!==true;});$invalid.first().focus();}}
return allValid;},instances=[],buildSettings=function buildSettings(options){var settings=$.extend({},defaults,options,methods),activeClass=settings.classPrefix+settings.activeClass;return $.extend(settings,{activeClass:activeClass,activeClassSelector:'.'+activeClass,requiredClass:settings.classPrefix+settings.requiredClass,el:this});},getInstance=function getInstance(){var $parent=$(this).closest('[data-h5-instanceId]');return instances[$parent.attr('data-h5-instanceId')];},setInstance=function setInstance(settings){var instanceId=instances.push(settings)-1;if(settings.RODom!==true){$(this).attr('data-h5-instanceId',instanceId);}
$(this).trigger('instance',{'data-h5-instanceId':instanceId});};$.h5Validate={addPatterns:function(patterns){var patternLibrary=defaults.patternLibrary,key;for(key in patterns){if(patterns.hasOwnProperty(key)){patternLibrary[key]=patterns[key];}}
return patternLibrary;},validValues:function(selector,values){var i=0,ln=values.length,pattern='',re;for(i=0;i<ln;i+=1){pattern=pattern?pattern+'|'+values[i]:values[i];}
re=new RegExp('^(?:'+pattern+')$');$(selector).data('regex',re);}};$.fn.h5Validate=function h5Validate(options){var action,args,settings;if(typeof options==='string'&&typeof methods[options]==='function'){settings=getInstance.call(this);args=[].slice.call(arguments,0);action=options;args.shift();args=$.merge([settings],args);return settings[action].apply(this,args);}
settings=buildSettings.call(this,options);setInstance.call(this,settings);return methods.bindDelegation.call(this,settings);};}(jQuery));"use strict";!function(e){function t(){var e=s();e!==r&&(r=e,u.trigger("orientationchange"))}function a(t,a,o,n){var i=o.type;o.type=a,e.event.dispatch.call(t,o,n),o.type=i}e.attrFn=e.attrFn||{};var o=navigator.userAgent.toLowerCase(),n=o.indexOf("chrome")>-1&&(o.indexOf("windows")>-1||o.indexOf("macintosh")>-1||o.indexOf("linux")>-1)&&o.indexOf("mobile")<0&&o.indexOf("android")<0,i={tap_pixel_range:5,swipe_h_threshold:50,swipe_v_threshold:50,taphold_threshold:750,doubletap_int:500,touch_capable:"ontouchstart"in window&&!n,orientation_support:"orientation"in window&&"onorientationchange"in window,startevent:"ontouchstart"in window&&!n?"touchstart":"mousedown",endevent:"ontouchstart"in window&&!n?"touchend":"mouseup",moveevent:"ontouchstart"in window&&!n?"touchmove":"mousemove",tapevent:"ontouchstart"in window&&!n?"tap":"click",scrollevent:"ontouchstart"in window&&!n?"touchmove":"scroll",hold_timer:null,tap_timer:null};e.isTouchCapable=function(){return i.touch_capable},e.getStartEvent=function(){return i.startevent},e.getEndEvent=function(){return i.endevent},e.getMoveEvent=function(){return i.moveevent},e.getTapEvent=function(){return i.tapevent},e.getScrollEvent=function(){return i.scrollevent},e.each(["tapstart","tapend","tapmove","tap","tap2","tap3","tap4","singletap","doubletap","taphold","swipe","swipeup","swiperight","swipedown","swipeleft","swipeend","scrollstart","scrollend","orientationchange"],function(t,a){e.fn[a]=function(e){return e?this.on(a,e):this.trigger(a)},e.attrFn[a]=!0}),e.event.special.tapstart={setup:function(){var t=this,o=e(t);o.on(i.startevent,function n(e){if(o.data("callee",n),e.which&&1!==e.which)return!1;var c=e.originalEvent,s={position:{x:i.touch_capable?c.touches[0].screenX:e.screenX,y:i.touch_capable?c.touches[0].screenY:e.screenY},offset:{x:Math.round(i.touch_capable?c.changedTouches[0].pageX-o.offset().left:e.pageX-o.offset().left),y:Math.round(i.touch_capable?c.changedTouches[0].pageY-o.offset().top:e.pageY-o.offset().top)},time:Date.now(),target:e.target};return a(t,"tapstart",e,s),!0})},remove:function(){e(this).off(i.startevent,e(this).data.callee)}},e.event.special.tapmove={setup:function(){var t=this,o=e(t);o.on(i.moveevent,function n(e){o.data("callee",n);var c=e.originalEvent,s={position:{x:i.touch_capable?c.touches[0].screenX:e.screenX,y:i.touch_capable?c.touches[0].screenY:e.screenY},offset:{x:Math.round(i.touch_capable?c.changedTouches[0].pageX-o.offset().left:e.pageX-o.offset().left),y:Math.round(i.touch_capable?c.changedTouches[0].pageY-o.offset().top:e.pageY-o.offset().top)},time:Date.now(),target:e.target};return a(t,"tapmove",e,s),!0})},remove:function(){e(this).off(i.moveevent,e(this).data.callee)}},e.event.special.tapend={setup:function(){var t=this,o=e(t);o.on(i.endevent,function n(e){o.data("callee",n);var c=e.originalEvent,s={position:{x:i.touch_capable?c.changedTouches[0].screenX:e.screenX,y:i.touch_capable?c.changedTouches[0].screenY:e.screenY},offset:{x:Math.round(i.touch_capable?c.changedTouches[0].pageX-o.offset().left:e.pageX-o.offset().left),y:Math.round(i.touch_capable?c.changedTouches[0].pageY-o.offset().top:e.pageY-o.offset().top)},time:Date.now(),target:e.target};return a(t,"tapend",e,s),!0})},remove:function(){e(this).off(i.endevent,e(this).data.callee)}},e.event.special.taphold={setup:function(){var t,o=this,n=e(o),c={x:0,y:0},s=0,r=0;n.on(i.startevent,function p(e){if(e.which&&1!==e.which)return!1;n.data("tapheld",!1),t=e.target;var h=e.originalEvent,u=Date.now(),l={x:i.touch_capable?h.touches[0].screenX:e.screenX,y:i.touch_capable?h.touches[0].screenY:e.screenY},f={x:i.touch_capable?h.touches[0].pageX-h.touches[0].target.offsetLeft:e.offsetX,y:i.touch_capable?h.touches[0].pageY-h.touches[0].target.offsetTop:e.offsetY};return c.x=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageX:e.pageX,c.y=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageY:e.pageY,s=c.x,r=c.y,i.hold_timer=window.setTimeout(function(){var g=c.x-s,d=c.y-r;if(e.target==t&&(c.x==s&&c.y==r||g>=-i.tap_pixel_range&&g<=i.tap_pixel_range&&d>=-i.tap_pixel_range&&d<=i.tap_pixel_range)){n.data("tapheld",!0);var v=Date.now(),w={x:i.touch_capable?h.touches[0].screenX:e.screenX,y:i.touch_capable?h.touches[0].screenY:e.screenY},_={x:Math.round(i.touch_capable?h.changedTouches[0].pageX-n.offset().left:e.pageX-n.offset().left),y:Math.round(i.touch_capable?h.changedTouches[0].pageY-n.offset().top:e.pageY-n.offset().top)},T=v-u,x={startTime:u,endTime:v,startPosition:l,startOffset:f,endPosition:w,endOffset:_,duration:T,target:e.target};n.data("callee1",p),a(o,"taphold",e,x)}},i.taphold_threshold),!0}).on(i.endevent,function h(){n.data("callee2",h),n.data("tapheld",!1),window.clearTimeout(i.hold_timer)}).on(i.moveevent,function u(e){n.data("callee3",u),s=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageX:e.pageX,r=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageY:e.pageY})},remove:function(){e(this).off(i.startevent,e(this).data.callee1).off(i.endevent,e(this).data.callee2).off(i.moveevent,e(this).data.callee3)}},e.event.special.doubletap={setup:function(){var t,o,n,c,s=this,r=e(s),p=null,h=!1;r.on(i.startevent,function u(e){return e.which&&1!==e.which?!1:(r.data("doubletapped",!1),t=e.target,r.data("callee1",u),n=e.originalEvent,p||(p={position:{x:i.touch_capable?n.touches[0].screenX:e.screenX,y:i.touch_capable?n.touches[0].screenY:e.screenY},offset:{x:Math.round(i.touch_capable?n.changedTouches[0].pageX-r.offset().left:e.pageX-r.offset().left),y:Math.round(i.touch_capable?n.changedTouches[0].pageY-r.offset().top:e.pageY-r.offset().top)},time:Date.now(),target:e.target}),!0)}).on(i.endevent,function l(e){var u=Date.now(),f=r.data("lastTouch")||u+1,g=u-f;if(window.clearTimeout(o),r.data("callee2",l),g<i.doubletap_int&&e.target==t&&g>100){r.data("doubletapped",!0),window.clearTimeout(i.tap_timer);var d={position:{x:i.touch_capable?e.originalEvent.changedTouches[0].screenX:e.screenX,y:i.touch_capable?e.originalEvent.changedTouches[0].screenY:e.screenY},offset:{x:Math.round(i.touch_capable?n.changedTouches[0].pageX-r.offset().left:e.pageX-r.offset().left),y:Math.round(i.touch_capable?n.changedTouches[0].pageY-r.offset().top:e.pageY-r.offset().top)},time:Date.now(),target:e.target},v={firstTap:p,secondTap:d,interval:d.time-p.time};h||(a(s,"doubletap",e,v),p=null),h=!0,c=window.setTimeout(function(){h=!1},i.doubletap_int)}else r.data("lastTouch",u),o=window.setTimeout(function(){p=null,window.clearTimeout(o)},i.doubletap_int,[e]);r.data("lastTouch",u)})},remove:function(){e(this).off(i.startevent,e(this).data.callee1).off(i.endevent,e(this).data.callee2)}},e.event.special.singletap={setup:function(){var t=this,o=e(t),n=null,c=null,s={x:0,y:0};o.on(i.startevent,function r(e){return e.which&&1!==e.which?!1:(c=Date.now(),n=e.target,o.data("callee1",r),s.x=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageX:e.pageX,s.y=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageY:e.pageY,!0)}).on(i.endevent,function p(e){if(o.data("callee2",p),e.target==n){var r=e.originalEvent.changedTouches?e.originalEvent.changedTouches[0].pageX:e.pageX,h=e.originalEvent.changedTouches?e.originalEvent.changedTouches[0].pageY:e.pageY;i.tap_timer=window.setTimeout(function(){if(!o.data("doubletapped")&&!o.data("tapheld")&&s.x==r&&s.y==h){var n=e.originalEvent,p={position:{x:i.touch_capable?n.changedTouches[0].screenX:e.screenX,y:i.touch_capable?n.changedTouches[0].screenY:e.screenY},offset:{x:Math.round(i.touch_capable?n.changedTouches[0].pageX-o.offset().left:e.pageX-o.offset().left),y:Math.round(i.touch_capable?n.changedTouches[0].pageY-o.offset().top:e.pageY-o.offset().top)},time:Date.now(),target:e.target};p.time-c<i.taphold_threshold&&a(t,"singletap",e,p)}},i.doubletap_int)}})},remove:function(){e(this).off(i.startevent,e(this).data.callee1).off(i.endevent,e(this).data.callee2)}},e.event.special.tap={setup:function(){var t,o,n=this,c=e(n),s=!1,r=null,p={x:0,y:0};c.on(i.startevent,function h(e){return c.data("callee1",h),e.which&&1!==e.which?!1:(s=!0,p.x=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageX:e.pageX,p.y=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageY:e.pageY,t=Date.now(),r=e.target,o=e.originalEvent.targetTouches?e.originalEvent.targetTouches:[e],!0)}).on(i.endevent,function u(e){c.data("callee2",u);var h=e.originalEvent.targetTouches?e.originalEvent.changedTouches[0].pageX:e.pageX,l=e.originalEvent.targetTouches?e.originalEvent.changedTouches[0].pageY:e.pageY,f=p.x-h,g=p.y-l;if(r==e.target&&s&&Date.now()-t<i.taphold_threshold&&(p.x==h&&p.y==l||f>=-i.tap_pixel_range&&f<=i.tap_pixel_range&&g>=-i.tap_pixel_range&&g<=i.tap_pixel_range)){for(var d=e.originalEvent,v=[],w=0;w<o.length;w++){var _={position:{x:i.touch_capable?d.changedTouches[w].screenX:e.screenX,y:i.touch_capable?d.changedTouches[w].screenY:e.screenY},offset:{x:Math.round(i.touch_capable?d.changedTouches[w].pageX-c.offset().left:e.pageX-c.offset().left),y:Math.round(i.touch_capable?d.changedTouches[w].pageY-c.offset().top:e.pageY-c.offset().top)},time:Date.now(),target:e.target};v.push(_)}a(n,"tap",e,v)}})},remove:function(){e(this).off(i.startevent,e(this).data.callee1).off(i.endevent,e(this).data.callee2)}},e.event.special.swipe={setup:function(){function t(a){s=e(a.currentTarget),s.data("callee1",t),h.x=a.originalEvent.targetTouches?a.originalEvent.targetTouches[0].pageX:a.pageX,h.y=a.originalEvent.targetTouches?a.originalEvent.targetTouches[0].pageY:a.pageY,u.x=h.x,u.y=h.y,r=!0;var o=a.originalEvent;n={position:{x:i.touch_capable?o.touches[0].screenX:a.screenX,y:i.touch_capable?o.touches[0].screenY:a.screenY},offset:{x:Math.round(i.touch_capable?o.changedTouches[0].pageX-s.offset().left:a.pageX-s.offset().left),y:Math.round(i.touch_capable?o.changedTouches[0].pageY-s.offset().top:a.pageY-s.offset().top)},time:Date.now(),target:a.target}}function a(t){s=e(t.currentTarget),s.data("callee2",a),u.x=t.originalEvent.targetTouches?t.originalEvent.targetTouches[0].pageX:t.pageX,u.y=t.originalEvent.targetTouches?t.originalEvent.targetTouches[0].pageY:t.pageY;var o,c=s.parent().data("xthreshold")?s.parent().data("xthreshold"):s.data("xthreshold"),l=s.parent().data("ythreshold")?s.parent().data("ythreshold"):s.data("ythreshold"),f="undefined"!=typeof c&&c!==!1&&parseInt(c)?parseInt(c):i.swipe_h_threshold,g="undefined"!=typeof l&&l!==!1&&parseInt(l)?parseInt(l):i.swipe_v_threshold;if(h.y>u.y&&h.y-u.y>g&&(o="swipeup"),h.x<u.x&&u.x-h.x>f&&(o="swiperight"),h.y<u.y&&u.y-h.y>g&&(o="swipedown"),h.x>u.x&&h.x-u.x>f&&(o="swipeleft"),void 0!=o&&r){h.x=0,h.y=0,u.x=0,u.y=0,r=!1;var d=t.originalEvent,v={position:{x:i.touch_capable?d.touches[0].screenX:t.screenX,y:i.touch_capable?d.touches[0].screenY:t.screenY},offset:{x:Math.round(i.touch_capable?d.changedTouches[0].pageX-s.offset().left:t.pageX-s.offset().left),y:Math.round(i.touch_capable?d.changedTouches[0].pageY-s.offset().top:t.pageY-s.offset().top)},time:Date.now(),target:t.target},w=Math.abs(n.position.x-v.position.x),_=Math.abs(n.position.y-v.position.y),T={startEvnt:n,endEvnt:v,direction:o.replace("swipe",""),xAmount:w,yAmount:_,duration:v.time-n.time};p=!0,s.trigger("swipe",T).trigger(o,T)}}function o(t){s=e(t.currentTarget);var a="";if(s.data("callee3",o),p){var c=s.data("xthreshold"),h=s.data("ythreshold"),u="undefined"!=typeof c&&c!==!1&&parseInt(c)?parseInt(c):i.swipe_h_threshold,l="undefined"!=typeof h&&h!==!1&&parseInt(h)?parseInt(h):i.swipe_v_threshold,f=t.originalEvent,g={position:{x:i.touch_capable?f.changedTouches[0].screenX:t.screenX,y:i.touch_capable?f.changedTouches[0].screenY:t.screenY},offset:{x:Math.round(i.touch_capable?f.changedTouches[0].pageX-s.offset().left:t.pageX-s.offset().left),y:Math.round(i.touch_capable?f.changedTouches[0].pageY-s.offset().top:t.pageY-s.offset().top)},time:Date.now(),target:t.target};n.position.y>g.position.y&&n.position.y-g.position.y>l&&(a="swipeup"),n.position.x<g.position.x&&g.position.x-n.position.x>u&&(a="swiperight"),n.position.y<g.position.y&&g.position.y-n.position.y>l&&(a="swipedown"),n.position.x>g.position.x&&n.position.x-g.position.x>u&&(a="swipeleft");var d=Math.abs(n.position.x-g.position.x),v=Math.abs(n.position.y-g.position.y),w={startEvnt:n,endEvnt:g,direction:a.replace("swipe",""),xAmount:d,yAmount:v,duration:g.time-n.time};s.trigger("swipeend",w)}r=!1,p=!1}var n,c=this,s=e(c),r=!1,p=!1,h={x:0,y:0},u={x:0,y:0};s.on(i.startevent,t),s.on(i.moveevent,a),s.on(i.endevent,o)},remove:function(){e(this).off(i.startevent,e(this).data.callee1).off(i.moveevent,e(this).data.callee2).off(i.endevent,e(this).data.callee3)}},e.event.special.scrollstart={setup:function(){function t(e,t){o=t,a(c,o?"scrollstart":"scrollend",e)}var o,n,c=this,s=e(c);s.on(i.scrollevent,function r(e){s.data("callee",r),o||t(e,!0),clearTimeout(n),n=setTimeout(function(){t(e,!1)},50)})},remove:function(){e(this).off(i.scrollevent,e(this).data.callee)}};var c,s,r,p,h,u=e(window),l={0:!0,180:!0};if(i.orientation_support){var f=window.innerWidth||u.width(),g=window.innerHeight||u.height(),d=50;p=f>g&&f-g>d,h=l[window.orientation],(p&&h||!p&&!h)&&(l={"-90":!0,90:!0})}e.event.special.orientationchange=c={setup:function(){return i.orientation_support?!1:(r=s(),u.on("throttledresize",t),!0)},teardown:function(){return i.orientation_support?!1:(u.off("throttledresize",t),!0)},add:function(e){var t=e.handler;e.handler=function(e){return e.orientation=s(),t.apply(this,arguments)}}},e.event.special.orientationchange.orientation=s=function(){var e=!0,t=document.documentElement;return e=i.orientation_support?l[window.orientation]:t&&t.clientWidth/t.clientHeight<1.1,e?"portrait":"landscape"},e.event.special.throttledresize={setup:function(){e(this).on("resize",x)},teardown:function(){e(this).off("resize",x)}};var v,w,_,T=250,x=function(){w=Date.now(),_=w-y,_>=T?(y=w,e(this).trigger("throttledresize")):(v&&window.clearTimeout(v),v=window.setTimeout(t,T-_))},y=0;e.each({scrollend:"scrollstart",swipeup:"swipe",swiperight:"swipe",swipedown:"swipe",swipeleft:"swipe",swipeend:"swipe",tap2:"tap"},function(t,a){e.event.special[t]={setup:function(){e(this).on(a,e.noop)}}})}(jQuery);!function(e,t){if("function"==typeof define&&define.amd)define(["module","exports"],t);else if("undefined"!=typeof exports)t(module,exports);else{var n={exports:{}};t(n,n.exports),e.fitty=n.exports}}(this,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.default=function(n){if(n){var i=function(e){return[].slice.call(e)},r={IDLE:0,DIRTY_CONTENT:1,DIRTY_LAYOUT:2,DIRTY:3},o=[],e=null,u="requestAnimationFrame"in n?function(){n.cancelAnimationFrame(e),e=n.requestAnimationFrame(function(){a(o.filter(function(e){return e.dirty}))})}:function(){},t=function(t){return function(){o.forEach(function(e){e.dirty=t}),u()}},a=function(e){e.filter(function(e){return!e.styleComputed}).forEach(function(e){e.styleComputed=f(e)}),e.filter(d).forEach(p);var t=e.filter(s);t.forEach(c),t.forEach(function(e){p(e),l(e)}),t.forEach(m)},l=function(e){return e.dirty=r.IDLE},c=function(e){e.availableWidth=e.element.parentNode.clientWidth,e.currentWidth=e.element.scrollWidth,e.previousFontSize=e.currentFontSize,e.currentFontSize=Math.min(Math.max(e.minSize,e.availableWidth/e.currentWidth*e.previousFontSize),e.maxSize),e.whiteSpace=e.multiLine&&e.currentFontSize===e.minSize?"normal":"nowrap"},s=function(e){return e.dirty!==r.DIRTY_LAYOUT||e.dirty===r.DIRTY_LAYOUT&&e.element.parentNode.clientWidth!==e.availableWidth},f=function(e){var t=n.getComputedStyle(e.element,null);e.currentFontSize=parseInt(t.getPropertyValue("font-size"),10),e.display=t.getPropertyValue("display"),e.whiteSpace=t.getPropertyValue("white-space")},d=function(e){var t=!1;return!e.preStyleTestCompleted&&(/inline-/.test(e.display)||(t=!0,e.display="inline-block"),"nowrap"!==e.whiteSpace&&(t=!0,e.whiteSpace="nowrap"),e.preStyleTestCompleted=!0,t)},p=function(e){e.originalStyle||(e.originalStyle=e.element.getAttribute("style")||""),e.element.style.cssText=e.originalStyle+";white-space:"+e.whiteSpace+";display:"+e.display+";font-size:"+e.currentFontSize+"px"},m=function(e){e.element.dispatchEvent(new CustomEvent("fit",{detail:{oldValue:e.previousFontSize,newValue:e.currentFontSize,scaleFactor:e.currentFontSize/e.previousFontSize}}))},v=function(e,t){return function(){e.dirty=t,u()}},y=function(e){e.newbie=!0,e.dirty=!0,o.push(e)},h=function(t){return function(){o=o.filter(function(e){return e.element!==t.element}),t.observeMutations&&t.observer.disconnect(),t.element.style.cssText=t.originalStyle}},S=function(e){e.observeMutations&&(e.observer=new MutationObserver(v(e,r.DIRTY_CONTENT)),e.observer.observe(e.element,e.observeMutations))},b={minSize:16,maxSize:512,multiLine:!0,observeMutations:"MutationObserver"in n&&{subtree:!0,childList:!0,characterData:!0}},w=null,T=function(){n.clearTimeout(w),w=n.setTimeout(t(r.DIRTY_LAYOUT),g.observeWindowDelay)},z=["resize","orientationchange"];return Object.defineProperty(g,"observeWindow",{set:function(e){var t=(e?"add":"remove")+"EventListener";z.forEach(function(e){n[t](e,T)})}}),g.observeWindow=!0,g.observeWindowDelay=100,g.fitAll=t(r.DIRTY),g}function F(e,t){var n=D({},b,t),i=e.map(function(e){var t=D({},n,{element:e});return y(t),S(t),{element:e,fit:v(t,r.DIRTY),unsubscribe:h(t)}});return u(),i}function g(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e?F(i(document.querySelectorAll(e)),t):F([e],t)[0]}}("undefined"==typeof window?null:window),e.exports=t.default});(function(){'use strict';var f,g=[];function l(a){g.push(a);1==g.length&&f()}function m(){for(;g.length;)g[0](),g.shift()}f=function(){setTimeout(m)};function n(a){this.a=p;this.b=void 0;this.f=[];var b=this;try{a(function(a){q(b,a)},function(a){r(b,a)})}catch(c){r(b,c)}}var p=2;function t(a){return new n(function(b,c){c(a)})}function u(a){return new n(function(b){b(a)})}function q(a,b){if(a.a==p){if(b==a)throw new TypeError;var c=!1;try{var d=b&&b.then;if(null!=b&&"object"==typeof b&&"function"==typeof d){d.call(b,function(b){c||q(a,b);c=!0},function(b){c||r(a,b);c=!0});return}}catch(e){c||r(a,e);return}a.a=0;a.b=b;v(a)}}
function r(a,b){if(a.a==p){if(b==a)throw new TypeError;a.a=1;a.b=b;v(a)}}function v(a){l(function(){if(a.a!=p)for(;a.f.length;){var b=a.f.shift(),c=b[0],d=b[1],e=b[2],b=b[3];try{0==a.a?"function"==typeof c?e(c.call(void 0,a.b)):e(a.b):1==a.a&&("function"==typeof d?e(d.call(void 0,a.b)):b(a.b))}catch(h){b(h)}}})}n.prototype.g=function(a){return this.c(void 0,a)};n.prototype.c=function(a,b){var c=this;return new n(function(d,e){c.f.push([a,b,d,e]);v(c)})};function w(a){return new n(function(b,c){function d(c){return function(d){h[c]=d;e+=1;e==a.length&&b(h)}}var e=0,h=[];0==a.length&&b(h);for(var k=0;k<a.length;k+=1)u(a[k]).c(d(k),c)})}function x(a){return new n(function(b,c){for(var d=0;d<a.length;d+=1)u(a[d]).c(b,c)})};window.Promise||(window.Promise=n,window.Promise.resolve=u,window.Promise.reject=t,window.Promise.race=x,window.Promise.all=w,window.Promise.prototype.then=n.prototype.c,window.Promise.prototype["catch"]=n.prototype.g);}());(function(){function l(a,b){document.addEventListener?a.addEventListener("scroll",b,!1):a.attachEvent("scroll",b)}function m(a){document.body?a():document.addEventListener?document.addEventListener("DOMContentLoaded",function c(){document.removeEventListener("DOMContentLoaded",c);a()}):document.attachEvent("onreadystatechange",function k(){if("interactive"==document.readyState||"complete"==document.readyState)document.detachEvent("onreadystatechange",k),a()})};function t(a){this.a=document.createElement("div");this.a.setAttribute("aria-hidden","true");this.a.appendChild(document.createTextNode(a));this.b=document.createElement("span");this.c=document.createElement("span");this.h=document.createElement("span");this.f=document.createElement("span");this.g=-1;this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;";this.b.appendChild(this.h);this.c.appendChild(this.f);this.a.appendChild(this.b);this.a.appendChild(this.c)}
function u(a,b){a.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+b+";"}function z(a){var b=a.a.offsetWidth,c=b+100;a.f.style.width=c+"px";a.c.scrollLeft=c;a.b.scrollLeft=a.b.scrollWidth+100;return a.g!==b?(a.g=b,!0):!1}function A(a,b){function c(){var a=k;z(a)&&a.a.parentNode&&b(a.g)}var k=a;l(a.b,c);l(a.c,c);z(a)};function B(a,b){var c=b||{};this.family=a;this.style=c.style||"normal";this.weight=c.weight||"normal";this.stretch=c.stretch||"normal"}var C=null,D=null,E=null,F=null;function G(){if(null===D)if(J()&&/Apple/.test(window.navigator.vendor)){var a=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent);D=!!a&&603>parseInt(a[1],10)}else D=!1;return D}function J(){null===F&&(F=!!document.fonts);return F}
function K(){if(null===E){var a=document.createElement("div");try{a.style.font="condensed 100px sans-serif"}catch(b){}E=""!==a.style.font}return E}function L(a,b){return[a.style,a.weight,K()?a.stretch:"","100px",b].join(" ")}
B.prototype.load=function(a,b){var c=this,k=a||"BESbswy",r=0,n=b||3E3,H=(new Date).getTime();return new Promise(function(a,b){if(J()&&!G()){var M=new Promise(function(a,b){function e(){(new Date).getTime()-H>=n?b(Error(""+n+"ms timeout exceeded")):document.fonts.load(L(c,'"'+c.family+'"'),k).then(function(c){1<=c.length?a():setTimeout(e,25)},b)}e()}),N=new Promise(function(a,c){r=setTimeout(function(){c(Error(""+n+"ms timeout exceeded"))},n)});Promise.race([N,M]).then(function(){clearTimeout(r);a(c)},b)}else m(function(){function v(){var b;if(b=-1!=f&&-1!=g||-1!=f&&-1!=h||-1!=g&&-1!=h)(b=f!=g&&f!=h&&g!=h)||(null===C&&(b=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),C=!!b&&(536>parseInt(b[1],10)||536===parseInt(b[1],10)&&11>=parseInt(b[2],10))),b=C&&(f==w&&g==w&&h==w||f==x&&g==x&&h==x||f==y&&g==y&&h==y)),b=!b;b&&(d.parentNode&&d.parentNode.removeChild(d),clearTimeout(r),a(c))}function I(){if((new Date).getTime()-H>=n)d.parentNode&&d.parentNode.removeChild(d),b(Error(""+
n+"ms timeout exceeded"));else{var a=document.hidden;if(!0===a||void 0===a)f=e.a.offsetWidth,g=p.a.offsetWidth,h=q.a.offsetWidth,v();r=setTimeout(I,50)}}var e=new t(k),p=new t(k),q=new t(k),f=-1,g=-1,h=-1,w=-1,x=-1,y=-1,d=document.createElement("div");d.dir="ltr";u(e,L(c,"sans-serif"));u(p,L(c,"serif"));u(q,L(c,"monospace"));d.appendChild(e.a);d.appendChild(p.a);d.appendChild(q.a);document.body.appendChild(d);w=e.a.offsetWidth;x=p.a.offsetWidth;y=q.a.offsetWidth;I();A(e,function(a){f=a;v()});u(e,L(c,'"'+c.family+'",sans-serif'));A(p,function(a){g=a;v()});u(p,L(c,'"'+c.family+'",serif'));A(q,function(a){h=a;v()});u(q,L(c,'"'+c.family+'",monospace'))})})};"object"===typeof module?module.exports=B:(window.FontFaceObserver=B,window.FontFaceObserver.prototype.load=B.prototype.load);}());var is_logged_in=isLoggedIn();var is_approved=getApprovalStatus();var is_production=isProduction();var user_type=getUserType();var is_tablet=Modernizr.mq('only all and (min-width: 768px) and (max-width: 959px)');var is_mobile=Modernizr.mq('only all and (min-width: 200px) and (max-width: 767px)');var is_portrait=Modernizr.mq('only all and (min-width: 200px) and (max-width: 479px)');var is_responsive=Modernizr.mq('only all and (min-width: 200px) and (max-width: 959px)');var Cache={};var is_ios=false;var is_android=false;var is_safari=false;var is_ie=false;var $AccountConnect;var $LmitedOffer;var enable_ampliffy=false;var requestsForNewPage=requestsForNewPage||[];var callback_functions={monitorPolaroids:monitorPolaroids};var masonryAds={enabled:false,distance:0,images:0,id:1,init:function(){if(is_portrait&&document.cookie.match(/(^|; *)Ampliffy=1;/)){masonryAds.enabled=true;}
if(!is_production&&is_portrait){masonryAds.enabled=true;masonryAds.setVerticalDistance(2);}},setVerticalDistance:function(distance){masonryAds.distance=distance;if(distance===0){masonryAds.enabled=false;}},hasSlot:function(){if(masonryAds.enabled&&(!is_production||typeof window.requestsForNewPage!='undefined')){var remainder=masonryAds.images%masonryAds.distance;masonryAds.images++;if(remainder===0){return true;}else{return false;}}else{masonryAds.images++;return false;}},pushSlot:function($html){$html.find('.slot-ampliffy-ads').prop('id','slot-ampliffy-'+masonryAds.id);masonryAds.populateSlot();},populateSlot:function(){if(typeof window.requestsForNewPage!='undefined'){window.requestsForNewPage.push({page_selector:'#slot-ampliffy-'+masonryAds.id});}else if(!is_production){console.log('Pushing Fake to ID: '+masonryAds.id);}
masonryAds.id++;},pushVisibleSlots:function(){if(masonryAds.enabled){if($('.slot-ampliffy-ads').exists()){$('.slot-ampliffy-ads').each(function(){$(this).prop('id','slot-ampliffy-'+masonryAds.id);masonryAds.populateSlot();});}}}};masonryAds.init();jQuery(document).ready(function($){masonryAds.pushVisibleSlots();enableSessionButtons();enableHovering();enableInlineBoxes();sniffBrowsers();observeInstagramAuth();saveUTMParams();trackUpgrades();removeOldCookies();$(document).click(function(e){hideFlashMessages();var counter=localStorage.getItem('clicksAway');if(counter!==null){if($(e.target).closest('#flash_offer_container').length>0){return false;}
localStorage.setItem('clicksAway',Number(counter)+1);}});if(is_logged_in){$('#language-menu-dropdown li a').each(function(){var link=$(this).data('link');$(this).attr('href',link);});if(window.newFrameworkToken){setCookie('auth._token.customLocal','Bearer%20'+window.newFrameworkToken)
setCookie('auth.strategy','customLocal')}}else{setCookie('auth._token.customLocal','false');localStorage.setItem('auth._token.customLocal','false');}
observeCoolDropdowns();observeResponsive();observeLoves();observeFollow();observeTabs();observeAlerts();observePhone();observeNavigation();observeNewNavigation();observeTrackers();observeMessages();observeNewUserPopup();$('.flash').children().each(function(){var id=$(this).attr('id');var html=$(this).html();showFlashMessage(html,id);setTimeout(function(){hideFlashMessages(1200);},7500);});if(!is_responsive){$(document).on('submit','form.submitter',function(e){if($(this).find(':submit').first().hasClass('disabled')){return false;}
if($(this)[0].checkValidity()){$('form.submitter :submit').addClass('disabled').attr('rel','submitted');}});}
$(document).on('click','.restricted',function(e){e.preventDefault();var notification=$(this).data('notification');newGrowler.notice(notification);});$(document).on('click','.restricted_modal',async function(e){e.preventDefault();var message=$(this).data('message');if(message){newGrowler.notice(message);await delay(3000);}
var modal=$(this).data('modal');if(modal==='sign_up_modal_holder'){setCookie('no_authorization_redirect_url',window.location.href);$AccountConnect.openSessionModal(null,$(this).data('utm'));}else if(modal==='upgrade'){setCookie('upgrade_redirect_url',window.location.href);var url='/dashboard/subscription/upgrades/';var utm=$(this).data('utm');if(utm){url+='?'+utm;}
window.location.href=url;}else{var html=$('#'+modal).html();if(html){$.colorbox({className:'restricted_overlay',html:html});}}});$('.link_to_vimity').on('click',function(e){e.preventDefault();var html=$('#link_to_vimity_popup').html();$.colorbox({html:html});});$('#menu_trigger').on('click',function(e){e.preventDefault();$('.sidebar-user .avatar').toggle();$('.user-menu').toggle();$('.user-menu').toggleClass('shown');});if($('#intranet').exists()){$('#content_menu').append('<div class="bar"></div>');var hide_options=readCookie('intranet_hide_options');if(hide_options){if(hide_options==1){$('#content_menu').addClass('hide');$('.content').addClass('full-width');}}
var date=new Date();date.setTime(date.getTime()+(30*24*60*60*1000));var expires='; expires='+date.toGMTString();$('#content_menu .bar').on('click',function(){if($('#content_menu').hasClass('hide')){document.cookie='intranet_hide_options=0'+expires+'; path=/;';}else{document.cookie='intranet_hide_options=1'+expires+'; path=/;';}
$('#content_menu').toggleClass('hide');$('.content').toggleClass('full-width');});$('#admin_search select').on('change',function(){var action=$('#admin_search select :selected').val();$('#admin_search').attr('action',action);});}
$('.shareDialogTrigger').click(function(e){e.stopPropagation();if(is_responsive&&'share'in navigator){var $dataSource=$('.shareDialogLink');return navigator.share({url:$dataSource.data('url'),title:$dataSource.data('title'),text:$dataSource.data('text'),});}
var $triggerElement=$(this);var $modalContainer=$triggerElement.next('.shareDialogContainer');var openStateClass='shareDialogModelOpen';var additionalMargin=20;var closeModal=function(){$modalContainer.hide();return $modalContainer.removeClass(openStateClass);};if($modalContainer.length){$('.shareDialogCloseButton').click(closeModal);$(document.body).click(function(e){if($modalContainer.hasClass(openStateClass)){if(!$(e.target).parents('.shareDialogContainer').length&&!$(e.target).hasClass('shareDialogTrigger')&&!$(e.target).hasClass('shareDialogContainer')){return closeModal();}}});$modalContainer.addClass(openStateClass);var $modal=$modalContainer.find('.shareDialog');if($triggerElement.data('dense')!==undefined){additionalMargin=0;}
var cssSettings={position:'absolute',top:Math.ceil($triggerElement.get(0).getClientRects()[0].height+additionalMargin)+'px'};if(is_mobile){cssSettings.left=0;cssSettings.right=0;cssSettings.margin='0 auto';}
$modal.css(cssSettings);$modalContainer.show();$modal.find('.shareDialogLinkCopyButton').click(function(){var $targetButton=$(this);var $successIndicatorIcon=$targetButton.find('.shareDialogLinkCopyIcon');$successIndicatorIcon.css({transition:'color 3s',color:'#31bd9a'});var linkToCopy=$targetButton.parent().find('.shareDialogLink');var range=document.createRange();var selection=window.getSelection();range.selectNode(linkToCopy.get(0));selection.removeAllRanges();selection.addRange(range);document.execCommand('copy');setTimeout(function(){$successIndicatorIcon.css('color','');},10000);});}});const notice=sessionStorage.getItem('old_notice')
if(notice){newGrowler.notice(notice);sessionStorage.removeItem('old_notice');}});$(window).bind('pageshow',function(event){if(event.originalEvent.persisted){window.location.reload();}});jQuery.fn.exists=function(){return this.length>0;};jQuery.urlParam=function(name){var query=window.location.search.substring(1);var vars=query.split('&');for(var i=0;i<vars.length;i++){var pair=vars[i].split('=');if(pair[0]==name){return pair[1];}}
return false;};$.fn.slideFadeToggle=function(easing,callback){return this.animate({opacity:'toggle',height:'toggle'},'fast',easing,callback);};jQuery.fn.spinner=function(options){var img=(options&&options['image'])||'spinner';var temp=this.identify('temp');var element_id=this.prop('id');var spinner_id=element_id+'_spinner';var image_url='/images/'+img+'.gif';if(is_production){image_url='//asset1.modelmanagement.com'+image_url;}
if($('#'+spinner_id).exists()){$('#'+spinner_id).remove();}else{if(options&&options['after']){this.before('<img class="spinner" id="'+spinner_id+'" src="'+image_url+'" alt="" />');}else{this.after('<img class="spinner" id="'+spinner_id+'" src="'+image_url+'" alt="" />');}}};jQuery.fn.loading=function(){var loading='loading';if($('.'+loading).exists()){this.removeClass(loading);this.find('.loading_one').remove();this.find('.loading_two').remove();}else{this.addClass(loading);this.append('<div class="loading_one"></div><div class="loading_two"></div>');this.addClass('loading');}};jQuery.fn.fancyShow=function(){this.fadeIn();};jQuery.fn.fancyHide=function(){this.fadeOut();};jQuery.fn.uncheck=function(){this.prop('checked',false);};jQuery.fn.check=function(){this.prop('checked',true);};$.fn.random=function(){return this.eq(Math.floor(Math.random()*this.length));};jQuery.fn.identify=function(prefix){var i=0;var id;return this.each(function(){if($(this).attr('id'))return;do{i++;id=prefix+'_'+i;}while($('#'+id).length>0);$(this).attr('id',id);});};jQuery.fn.randomise=function(selector){(selector?this.find(selector):this).parent().each(function(){$(this).children(selector).sort(function(){return Math.random()-0.5;}).detach().appendTo(this);});return this;};function sniffBrowsers(){var ua=navigator.userAgent.toLowerCase();if(ua.match(/(ipod|iphone|ipad)/)){is_ios=true;}
if(ua.indexOf('android')>-1){is_android=true;}
if(ua.indexOf('safari')>-1){is_safari=true;}
if(ua.indexOf('msie')>-1||ua.indexOf('edge')>-1){is_ie=true;}}
function observeMessages(){$('body').on('click','.prep_msg',function(e){if($(e.target).hasClass('send_msg')){e.preventDefault();$(this).find('.msg_holder').toggle();$(this).find('.msg_holder .benjamin').removeClass('disabled');if($(this).find('.msg_holder textarea').val()!==''){$(this).find('.msg_holder textarea').val('');}}
if($(e.target).hasClass('close_msg')){$(this).find('.msg_holder').hide();}});$('body').on('submit','.prep_msg form',function(e){e.preventDefault();var $submit=$(this).find('.benjamin');if(!$submit.hasClass('disabled')){var action=$(this).prop('action');var data=$(this).serialize();$submit.spinner();$submit.addClass('disabled');$.post(action,data).done(function(result){newGrowler.success(result);}).fail(function(result){var html=$('#message_modal_holder').html();$.colorbox({className:'restricted_overlay',html:html,});}).always(function(){$submit.spinner();$('.prep_msg .msg_holder').fadeOut();$submit.removeClass('disabled');});}});}
function observeInstagramAuth(){$('.ig_connect, .instagram_login:not(.ig_import)').on('click',function(e){sessionStorage.setItem('InstagramAuth','true');});if(sessionStorage.getItem('InstagramAuth')){sessionStorage.removeItem('InstagramAuth');window.ga&&window.ga('set','referrer','https://www.modelmanagement.com/');}}
function saveUTMParams(){const savedUTMParams=localStorage.getItem('utm_params');if(!savedUTMParams||JSON.parse(savedUTMParams).date<new Date().getTime()-604800000){const utmKeys=['medium','source','content','campaign','term'];const utmParams={};const queryParams=new URLSearchParams(window.location.search);let hasUTMParams=false;utmKeys.forEach((key)=>{if(queryParams.get(['utm_'+key])){utmParams[key]=queryParams.get(['utm_'+key]);hasUTMParams=true;}});if(hasUTMParams){utmParams.date=new Date().getTime();localStorage.setItem('utm_params',JSON.stringify(utmParams));}}}
function observeLoves(){$('.love_it').on('click',function(e){e.preventDefault();if(!$(this).hasClass('loved')){var type=$(this).data('type');var type_id=$(this).data('id');var button=$(this);button.spinner();$.ajax({type:'post',url:'/model-style/love',data:{'type':type,'type_id':type_id}}).done(function(data,textStatus,request){button.addClass('loved');button.find('.loved_count').html(data);}).fail(function(data,textStatus,request){newGrowler.error(data.responseText);}).always(function(){button.spinner();});}});}
function observePhone(){if($('.phone_number').exists()){var countryData=$.fn.intlTelInput.getCountryData();var geoCountry=false;if($('#geo_country').exists()){geoCountry=$('#geo_country').val();}
if($('.geo_country').exists()){geoCountry=$('.geo_country').val();}
$.each(countryData,function(i,country){country.name=country.name.replace(/.+\((.+)\)/,'$1');});$('.phone_number').intlTelInput({initialCountry:geoCountry,nationalMode:false,separateDialCode:true,hiddenInput:'phone_number_hidden',preferredCountries:['es','de','fr','gb','us']});$('.phone_number').on('change, keyup',function(e){var number=$(this).intlTelInput('getNumber');var element='.hidden_number';if($(this).data('element')){element='.'+$(this).data('element');}
$(element).val(number);});}}
function observeNavigation(){if(!is_responsive){$('#main_nav .element').hover(function(){$('.nav_overlay').css('z-index','1000000').addClass('show');},function(){$('.nav_overlay').removeClass('show').css('z-index','-10');});$('.primary_nav .rankings_list a').hover(function(){var id=$(this).data('id');$(this).addClass('selected');$('.primary_nav #ranking-image-'+id).addClass('selected');},function(){var id=$(this).data('id');$(this).removeClass('selected');$('.primary_nav #ranking-image-'+id).removeClass('selected');});$('.primary_nav .clicker').on('click',function(e){var link=$(this).find('.ghost').prop('href');if(link!==''){window.location=link;}});$('.primary_nav .model_stats').on('click',function(e){var link=$('.primary_nav .model_images .ghost').prop('href');if(link!==''){window.location=link;}});$('.primary_nav .model_stats').hover(function(){$('.primary_nav .model_images').addClass('hover');},function(){$('.primary_nav .model_images').removeClass('hover');});}}
function observeNewNavigation(){function toggleAdditionalMenu(){$('.dropdown').toggleClass('is-active');$('.additional-menu .dropdown-menu').fadeToggle(150);}
function toggleMobileSidebar(){$('body').toggleClass('nav_open');$('.mobile-sidebar-opener').toggleClass('open');$('.dropdown').toggleClass('is-active');}
$(window).click(function(){if($('.dropdown').hasClass('is-active')){$('body').removeClass('nav_open');$('.mobile-sidebar-opener').removeClass('open');$('.dropdown').removeClass('is-active');$('.additional-menu .dropdown-menu').fadeOut(150);}});$('.additional-menu, .mobile-sidebar-opener').click(function(event){event.stopPropagation();});$('.additional-menu-trigger').click(toggleAdditionalMenu);$('.btn-navbar').on('click',function(e){$('body').toggleClass('nav_open');$('#main_nav').toggleClass('open');$('#main_nav .submenu').removeClass('open');$('#main_nav .sub_link').removeClass('selected');if(is_responsive){$(this).toggleClass('open');}});$('.collapse-trigger').click(function(){const container=$(this).closest('.collapse');container.toggleClass('open');container.find('.collapse-content').fadeToggle(150);container.closest('.dropdown-content').scrollTop(9999);});$('.mobile-sidebar-opener').click(toggleMobileSidebar);const bottomMenu=$('.main-nav-container .nav-bar');let oldScrollY=window.scrollY;document.addEventListener('scroll',function(e){const newScrollY=window.scrollY;const pageHeight=document.body.offsetHeight;const windowHeight=window.innerHeight;const hideBottomMenu=windowHeight+newScrollY>=pageHeight||(newScrollY>0&&newScrollY>=oldScrollY);if(bottomMenu.hasClass('hide')!==hideBottomMenu){bottomMenu.toggleClass('hide');}
oldScrollY=newScrollY;});}
function observeTrackers(){if(window.sessionStorage&&sessionStorage.length>0&&sessionStorage.getItem('purchase')!==null){var object=sessionStorage.getItem('purchase');var purchase=JSON.parse(object);var products=[];var data={'category':'Memberships','action':purchase.alias,'event':'purchase','ecommerce':{'transaction_id':purchase.transactionId,'value':purchase.transactionTotal,'currency':purchase.currency,'coupon':purchase.discountCode,},};products.push({'item_id':purchase.itemId,'item_name':purchase.name,'currency':purchase.currency,'price':purchase.value,});data['ecommerce']['items']=products;window.dataLayer=window.dataLayer||[];window.dataLayer.push(data);sessionStorage.removeItem('purchase');}}
function observeFollow(){$('.user_follow, .user_unfollow').on('click',function(e){e.preventDefault();var btn=$(this);var type=btn.data('type');var user_id=btn.data('id');btn.find('i').hide().spinner();var url='/ajax/follow';if(type=='unfollow'){url='/ajax/unfollow';}
$.ajax({type:'get',url:url,data:{'user_id':user_id}}).done(function(data,textStatus,request){if(type=='unfollow'){$('#user_unfollow_container-'+user_id).hide();$('#user_follow_container-'+user_id).show();$('.user_unfollow_container-'+user_id).hide();$('.user_follow_container-'+user_id).show();}else{$('#user_follow_container-'+user_id).hide();$('#user_unfollow_container-'+user_id).show();$('.user_follow_container-'+user_id).hide();$('.user_unfollow_container-'+user_id).show();}
newGrowler.notice(data);}).fail(function(data,textStatus,request){newGrowler.notice(data);}).always(function(){btn.find('i').show().spinner();});});}
function observeResponsive(){if(is_responsive){$('#main_nav').removeClass('primary_nav').addClass('resp_nav');$('form').h5Validate({errorClass:'field-required'});$('.sidebar-right .headline').on('click',function(){var toggle=$(this).data('toggle');$('#toggle-'+toggle).slideToggle();});}
$(window).resize(function(){is_responsive=Modernizr.mq('only all and (min-width: 200px) and (max-width: 959px)');if(is_responsive){$('#main_nav').removeClass('primary_nav').addClass('resp_nav');}else if(!$('#main_nav').hasClass('transparent')){$('#main_nav').addClass('primary_nav').removeClass('resp_nav');}});$('.resp_nav .sub_link').on('click',function(e){if($('#main_nav').hasClass('resp_nav')){e.preventDefault();if(!$(this).hasClass('selected')){$('.resp_nav .sub_link').removeClass('selected');$('.resp_nav .submenu').removeClass('open');$(this).addClass('selected');$(this).next('.submenu').addClass('open');}else{$(this).removeClass('selected');$(this).next('.submenu').removeClass('open');}}});$('#langs').on('change',function(e){var url=$('#langs option:selected').data('link');if(url!==''){window.location=url;}});}
function observeAlerts(){var alerts=readCookie('mm_alerts');var name;$('.alert').each(function(){name=$(this).data('name');if(alerts){var data=jQuery.parseJSON(alerts);if(typeof data[name]==='undefined'||data[name]!==true){$(this).show();}}else{$(this).show();}});$('.alert .close').on('click',function(e){e.preventDefault();$(this).parent().hide();name=$(this).parent('.alert').data('name');var data;if(alerts){data=jQuery.parseJSON(alerts);}else{data={};}
data[name]=true;var json=JSON.stringify(data);var date=new Date();date.setTime(date.getTime()+(30*24*60*60*1000));var expires='; expires='+date.toGMTString();document.cookie='mm_alerts='+json+expires+'; path=/;';});}
function observeTabs(){$('.tabs.inline li').on('click',function(e){e.preventDefault();var tab=$(this).data('tab');var use_hash=true;var self=$(this);var existing_content;var is_enabled=!$(this).hasClass('disabled');if(!is_enabled){return false;}
if($(this).data('hash')===false){use_hash=false;}
$('#tab_container .tab').removeClass('selected').hide();$('.tabs.inline li').removeClass('selected');$(this).addClass('selected');if(typeof $(this).data('inline')!=='undefined'){var inline=$(this).data('inline');existing_content=$('#tabbed-'+tab).html();if(existing_content===''){var content=$(inline).wrap('<span/>').parent().html();$('#tabbed-'+tab).html(content);}}else if(typeof $(this).data('source')!=='undefined'){var source=$(this).data('source');existing_content=$('#tabbed-'+tab).html().trim();if(existing_content===''){$('#tabbed-'+tab).html('<p></p>');var container=$('#tabbed-'+tab+' p');container.spinner();$.ajax({type:'post',url:source}).done(function(data,textStatus,request){$('#tabbed-'+tab).html(data);if(typeof self.data('callback')!=='undefined'){var callback=self.data('callback');callback_functions[callback]();}}).fail(function(data,textStatus,request){newGrowler.error(data.responseText);}).always(function(){container.spinner();});}}
if(use_hash){$('#tab_container #'+tab).show();window.location.hash='#'+tab;}else{$('#tabbed-'+tab).show();}});var hash=window.location.hash;$('.tabs.inline li').each(function(){var tab=$(this).data('tab');if('#'+tab==hash){$('#tab_container .tab').removeClass('selected').hide();$('#tab_container #'+tab).show();$('.tabs.inline li').removeClass('selected');$(this).addClass('selected');window.scrollTo(0,0);}});}
function observeCoolDropdowns(){if($('.cool_select').exists()){$('.cool_select').each(function(){if(!is_responsive){var select=$(this).find('select').hide();var html=select.find('option').first().text();var options=select.find('option');var i=1;var is_disabled=select.attr('disabled');if(is_disabled){$(this).addClass('disabled');}
html+='<ul><div>';options.each(function(){var url=$(this).data('url');var name=$(this).text();if(i!==1){html+='<li><a href="'+url+'">'+name+'</a></li>';}
i++;});html+='</ul></div>';$(this).addClass('cool_dropdown').append(html);}else{$(this).on('change',function(){var url=$(this).find(':selected').data('url');window.location=url;});}});}
if($('.cool_dropdown').exists()){$('.cool_dropdown').on('click',function(){if(!$(this).hasClass('disabled')){$(this).find('ul').toggle();}});$(document).on('click',function(e){var element=$(e.target);if(!element.hasClass('cool_dropdown')){if(!element.offsetParent().hasClass('cool_dropdown')){$('.cool_dropdown ul').hide();}else{$('.cool_dropdown ul').each(function(){if($.contains(element,$(this))){$(this).hide();}});}}else{$('.cool_dropdown ul').each(function(){if($.contains(element,$(this))){$(this).hide();}});}});}
if(!is_responsive){if($('.multiple_select').exists()){$('.multiple_select').select2();}}}
function isValidEmail(email){var regex=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return email.match(regex);}
function showFlashMessage(html,type){$('.flash_message').remove();$('body').prepend('<div class="flash_message '+type+'"><div>'+html+'<i class="far fa-times-circle"></i></div></div>');var height=$('.flash_message').outerHeight();$('.flash_message').css('margin-top',-height);$('.flash_message').animate({marginTop:0},1000);}
function hideFlashMessages(speed){if(!$('.flash_message').is(':animated')){speed=typeof speed!=='undefined'?speed:500;$('.flash_message').animate({top:-$(this).outerHeight()},speed);}}
function enableHovering(){$('.hoverable').hover(function(){$(this).toggleClass('hover');});}
function isProduction(){var domain=window.location.host;if(domain=='www.modelmanagement.com'||domain=='members.modelmanagement.com'||domain=='intranet.modelmanagement.com'){return true;}
return false;}
function getApprovalStatus(){var type=$('body').data('status');if(type=='approved'){return true;}
return false;}
function getUserType(){return new URLSearchParams(unescape(readCookie('mm'))).get('UserTarget');}
function monitorPolaroids(){$.colorbox.close();if($('#polaroids').exists()){$('#polaroids .polaroid').colorbox({photo:true,rel:'polaroid_group',className:'has_title',scalePhotos:true,current:' '});}
if($('#instagram_photos').exists()){$('#instagram_photos a').colorbox({photo:true,rel:'instagram_group',className:'has_title',scalePhotos:true,current:' '});}}
function enableInlineBoxes(){$('.inline_box_footer a, .inline_box_close').on('click',function(e){e.preventDefault();var inline_box=$(this).closest('.inline_box');var inline_id=inline_box.prop('id').split('-')[1];var is_checked=inline_box.find('.inline_box_footer input').first().prop('checked');inline_box.fadeOut();if(is_checked){$.ajax({type:'post',url:'/ajax/set_inline_box/',data:{name:inline_id}}).fail(function(data,textStatus,request){newGrowler.error(data);});}});}
function isLoggedIn(){var cookie_name='mmt=';var check_cookie_name='mmts=';var ca=document.cookie.split(';');var cookie_val=false;var is_valid=false;var status='logged_out';for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' '){c=c.substring(1,c.length);}
if(c.indexOf(cookie_name)===0){cookie_val=unescape(c.substring(cookie_name.length,c.length));}
if(c.indexOf(check_cookie_name)===0){is_valid=true;}}
var parts=document.cookie.split(/;\s*/);for(var j=0;j<parts.length;j++){var part=parts[j];if(part.indexOf(cookie_name)===0){is_valid=true;}}
if(cookie_val&&is_valid){return cookie_val;}
return false;}
function readCookie(name){var nameEQ=name+'=';var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' ')c=c.substring(1,c.length);if(c.indexOf(nameEQ)===0){return c.substring(nameEQ.length,c.length);}}
return null;}
function setCookie(name,content){document.cookie=name+'='+content+';max-age=2592000; path=/;';}
function removeOldCookies(){document.cookie="mm=; max-age=0; domain=.modelmanagement.com;";document.cookie="mmt=; max-age=0; domain=.modelmanagement.com;";document.cookie="mm_session=; max-age=0; domain=.modelmanagement.com;";}
function enableSessionButtons(){var cookie_val=is_logged_in;if(window.location.hostname=='intranet.modelmanagement.com'){window.location='http://www.modelmanagement.com'+window.location.pathname+window.location.search;}
var status='';if(cookie_val){var data=jQuery.parseJSON(cookie_val);if(data['private']===true){$('.session-private').addClass('show').show();$('.session-public').addClass('hide');$('.private-link').show();}else if(data['internal']===true){$('.session-logout').addClass('show').show();$('.session-internal').addClass('show').show();$('.session-public').addClass('hide');$('.private-link').show();status='internal';}else{$('.session-public').addClass('show').show();}
if(typeof data['profile']!='undefined'&&data['profile']!==false&&$('.dashboard-link')){$('.dashboard-link').addClass('show').show();status='logged_in';}
const userType=new URLSearchParams(unescape(readCookie('mm'))).get('UserTarget');$(`.session-${userType}`).show();}else{$('.session-public').addClass('show').show();$(`.session-logged_out`).show();$('.homepage-more-menu .collapse-trigger').hide(0);$('.homepage-more-menu .collapse-content').show(0);}}
(function(){var initializing=false,fnTest=/xyz/.test(function(){xyz;})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(prop){var _super=this.prototype;initializing=true;var prototype=new this();initializing=false;for(var name in prop){prototype[name]=typeof prop[name]=='function'&&typeof _super[name]=='function'&&fnTest.test(prop[name])?(function(name,fn){return function(){var tmp=this._super;this._super=_super[name];var ret=fn.apply(this,arguments);this._super=tmp;return ret;};})(name,prop[name]):prop[name];}
function Class(){if(!initializing&&this.init)
this.init.apply(this,arguments);}
Class.prototype=prototype;Class.prototype.constructor=Class;Class.extend=arguments.callee;return Class;};})();var ModalMessage=Class.extend({init:function(){},notice:function(message,autohide){showFlashMessage(message,'flash_notice');if(!autohide){setTimeout(function(){hideFlashMessages(1200);},5000);}},error:function(message){showFlashMessage(message,'flash_error');setTimeout(function(){hideFlashMessages(1200);},5000);},success:function(message){showFlashMessage(message,'flash_success');setTimeout(function(){hideFlashMessages(1200);},5000);}});var newGrowler=new ModalMessage();function _(translation_key,args,translation_section){if(typeof args=='undefined'){args={};}
var returnval=translation_key;for(var id in args){try{returnval=returnval.replace(id,args[id]);}catch(e){}}
return returnval;}
(function(){var method;var noop=function(){};var methods=['assert','clear','count','debug','dir','dirxml','error','exception','group','groupCollapsed','groupEnd','info','log','markTimeline','profile','profileEnd','table','time','timeEnd','timeStamp','trace','warn'];var length=methods.length;var console=(window.console=window.console||{});while(length--){method=methods[length];if(!console[method]){console[method]=noop;}}}());(function($){$.extend($,{placeholder:{browser_supported:function(){return this._supported!==undefined?this._supported:(this._supported=!!('placeholder'in $('<input type="text">')[0]));},shim:function(opts){var config={color:'#888888',cls:'placeholder',selector:'input[placeholder], textarea[placeholder]'};$.extend(config,opts);return!this.browser_supported()&&$(config.selector)._placeholder_shim(config);}}});$.extend($.fn,{_placeholder_shim:function(config){function calcPositionCss(target){var op=$(target).offsetParent().offset();var ot=$(target).offset();return{top:ot.top-op.top,left:ot.left-op.left,width:$(target).width()};}
function adjustToResizing(label){var $target=label.data('target');if(typeof $target!=='undefined'){label.css(calcPositionCss($target));$(window).one('resize',function(){adjustToResizing(label);});}}
return this.each(function(){var $this=$(this);if($this.is(':visible')){if($this.data('placeholder')){var $ol=$this.data('placeholder');$ol.css(calcPositionCss($this));return true;}
var possible_line_height={};if(!$this.is('textarea')&&$this.css('height')!='auto'){possible_line_height={lineHeight:$this.css('height'),whiteSpace:'nowrap'};}
var isBorderBox=($this.css('box-sizing')==='border-box');var ol=$('<label />').text($this.attr('placeholder')).addClass(config.cls).css($.extend({position:'absolute',display:'inline','float':'none',overflow:'hidden',textAlign:'left',color:config.color,cursor:'text',paddingTop:isBorderBox?'0':$this.css('padding-top'),paddingRight:$this.css('padding-right'),paddingBottom:isBorderBox?'0':$this.css('padding-bottom'),paddingLeft:$this.css('padding-left'),fontSize:$this.css('font-size'),fontFamily:$this.css('font-family'),fontStyle:$this.css('font-style'),fontWeight:$this.css('font-weight'),textTransform:$this.css('text-transform'),backgroundColor:'transparent',zIndex:99},possible_line_height)).css(calcPositionCss(this)).attr('for',this.id).data('target',$this).click(function(){$(this).data('target').focus();}).insertBefore(this);$this.data('placeholder',ol).keydown(function(){ol.hide();}).blur(function(){ol[$this.val().length?'hide':'show']();}).triggerHandler('blur');$(window).one('resize',function(){adjustToResizing(ol);});}});}});})(jQuery);jQuery(document).add(window).bind('ready load',function(){if(jQuery.placeholder){jQuery.placeholder.shim();}});$(document).on('click','.new-popup-close-icon, .new-popup-overlay',function(){$(this).closest('.new-popup').fadeOut(150);});function delay(ms){return new Promise(resolve=>setTimeout(resolve,ms));}
const observeNewUserPopup=()=>{if(!sessionStorage.getItem('newUserClickCount')){sessionStorage.setItem('newUserClickCount',0);}
let clickCount=parseInt(sessionStorage.getItem('newUserClickCount'),10);if(clickCount>=5){return;}
document.addEventListener('click',countClicks);};const countClicks=()=>{if(false){return;}
const clickCount=parseInt(sessionStorage.getItem('newUserClickCount'),10)+1;sessionStorage.setItem('newUserClickCount',clickCount);if(clickCount>=5){document.removeEventListener('click',countClicks);$('.new-user-popup').fadeIn(150);}}
function trackUpgrades(){const allowedPages=['/memberships','/account'];const currentUrlPath=window.location.pathname;if(!allowedPages.some((aP)=>currentUrlPath.includes(aP))){sessionStorage.removeItem('upgrade_tracker');}}
function trackUpgradeClick(button){const data=button.data('upgrade');try{window.dataLayer=window.dataLayer||[];window.dataLayer.push({event:'track_upgrade',...data});const stringifiedData=JSON.stringify(data);sessionStorage.setItem('upgrade_tracker',stringifiedData);}catch{}}
$(document).on('click','.track-upgrade',function(){trackUpgradeClick($(this));});$('.dropdown-content').on('click','.track-upgrade',function(){trackUpgradeClick($(this));});jQuery(document).ready(function($){$('.info_icon').hover(function(){$(this).children().toggleClass('hidden');return false;});$('#add_another_location').on('click',function(e){e.preventDefault();$('#location_restricted').removeClass('hidden');});var viewport_width=$(window).width();var viewport_height=$(window).height();var close_button=true;if(!is_mobile){viewport_width=viewport_width-150;close_button=false;}
$('#vimity_photos .img a').colorbox({photo:true,closeButton:close_button,className:'has_title',rel:'vimity_image',preloading:true,scalePhotos:true,maxWidth:viewport_width,maxHeight:viewport_height,current:' '});observeAgenciesModels();$(document).on('click','.big_checkbox',function(e){var is_checked=$(this).find('input').is(':checked');var is_required=$(this).find('input').prop('required');if(!is_checked){$(this).find('input').prop('checked',true);$(this).find('.unchecked').hide();$(this).find('.checked').show();if(is_required){$(this).find('input')[0].setCustomValidity('');}}else{$(this).find('input').prop('checked',false);$(this).find('.checked').hide();$(this).find('.unchecked').show();if(is_required){var required_text=$(this).find('input')[0].dataset.requiredText;$(this).find('input')[0].setCustomValidity(required_text);}}});if(is_mobile){$('.user-profile .details_container .stars').on('click',function(e){$('.user_details .tabs li.info').click();$('html, body').animate({'scrollTop':$('#tab_container #reviews').offset().top},2000);});}
$('.tip_holder .close').on('click',function(){$('.tip_holder').animate({'width':'0'},175,function(){$(this).hide();});});$('.session-connect').on('click',function(){$('#model_now_footer').hide();});$(document).on('click','#cboxOverlay.account_modal, #cboxClose',function(){$LmitedOffer.observeNotifications();});var pathname=window.location.pathname;if(pathname.includes('account')){$('#model_now_footer').hide();}});function observeAgenciesModels(){$('#toggle-gender input').on('click',function(e){var gender=$(this).data('gender');if($(this).hasClass('selected')){$('#model-list .'+gender).fadeOut();$(this).removeClass('selected');}else{$('#model-list .'+gender).fadeIn();$(this).addClass('selected');}});}
var fitText=Class.extend({init:function(options){if(!('Promise'in window)){return;}
var defaults={'element':'.fit_text','font':'GrotzecCondBold','maxSize':224,'spacing':0};if(options){this.options=$.extend({},defaults,options);}else{this.options=defaults;}
$(this.options.element).css('visibility','hidden');return this.loadFont();},loadFont:function(){var self=this;new FontFaceObserver(self.options.font).load().then(function(){return self.fit();},function(){return self.fit();});},fit:function(){var fitties=fitty(this.options.element,{maxSize:this.options.maxSize});var self=this;if(self.options.spacing!==0){var element=fitties[0].element;var i=0;$(self.options.element+' .inner').css('letterSpacing',self.options.spacing+'px').promise().done(function(){$(self.options.element).css('visibility','visible').addClass('fitted');});}else{$(self.options.element).css('visibility','visible').addClass('fitted');}
return true;}});jQuery(document).ready(function($){$('.fab_form .radios, .fab_form .toggles').each(function(){var $element=$(this);var key=$(this).data('radio');$element.find('.radio').on('click',function(e){$element.find('.radio').removeClass('selected');$element.parents('.element').removeClass('invalid');if($element.hasClass('toggles')){$(this).addClass('selected');}
$('#hidden-radio-'+key).val($(this).data('type')).prop('checked','checked');});});$('.fab_form .radios, .fab_form .checkbox_toggles').each(function(){var $element=$(this);$element.find('.radio').on('click',function(e){$element.parents('.element').removeClass('invalid');$(this).toggleClass('selected');if($(this).hasClass('selected')){$(this).find('.hidden-checkbox').first().prop('checked','checked');}else{$(this).find('.hidden-checkbox').first().prop('checked','');}
if($element.data('required')&&$element.data('required')==='required'){var checked=$element.find(':checkbox:checked').length;if(checked>=1){$element.find('.hidden-checkbox').prop('required','');}else{$element.find('.hidden-checkbox').prop('required','required');}}});});$(document).on('click','.fab_form .custom_checkbox',function(e){var $input=$(this).find('input');var input=$input.get(0);var $checkedInput=$(this).find('.checked');var $uncheckedInput=$(this).find('.unchecked');var isChecked=$input.is(':checked');var isRequired=$input.prop('required');$checkedInput.toggle();$uncheckedInput.toggle();if(!isChecked&&isRequired){input.setCustomValidity('');$(this).find('.error').hide();}
$input.prop('checked',!isChecked);$input.trigger('change');});$('.fab_form .slider .control').each(function(){var $slider=$(this);var rand=$slider.data('rand');var type=$slider.data('type');var step=$slider.data('step');$slider.slider({range:true,min:$slider.data('min'),max:$slider.data('max'),values:[$slider.data('start'),$slider.data('end')],step:step,slide:function(event,ui){var first_value=ui.values[0];var last_value=ui.values[1];if(type){var html;if(type==='height'){var feet=Math.floor(first_value/30.48);var total_inches=first_value/2.54;var inches=Math.round(total_inches-(12*feet));feet=Math.floor(first_value/30.48);var start_feet_and_inches=feet+'&acute;'+inches+'&#8221;';feet=Math.floor(last_value/30.48);total_inches=last_value/2.54;inches=Math.round(total_inches-(12*feet));feet=feet=Math.floor(last_value/30.48);var end_feet_and_inches=feet+'&acute;'+inches+'&#8221;';html=first_value+'cm / '+start_feet_and_inches+' - '+last_value+'cm / '+end_feet_and_inches+'';}else if(type==='shoes'){var shoe_values={36:'36 EU, 3 UK, 3 US',37:'37 EU, 4 UK, 4 US',38:'38 EU, 5 UK, 5 US',39:'39 EU, 6 UK, 6 US',40:'40 EU, 6½ UK, 7 US',41:'41 EU, 7 UK, 7½ US',42:'42 EU, 8 UK, 8 US',43:'43 EU, 9 UK, 9 US',44:'44 EU, 9½ UK, 10 US',45:'45 EU, 10 UK, 11 US',46:'46 EU, 11 UK, 12 US',47:'47 EU, 12 UK, 13 US',48:'48 EU, 13 UK, 14 US',49:'49 EU, 14 UK, 15 US'};html=shoe_values[first_value]+' - '+shoe_values[last_value];}
$('#slider-'+rand+' .display').html(html);}else{$('#slider-'+rand+' .slide_display_min').html(first_value);$('#slider-'+rand+' .slide_display_max').html(last_value);}
$('#slider-'+rand+' .hidden_slider_min').val(first_value);$('#slider-'+rand+' .hidden_slider_max').val(last_value);$('#slider-'+rand+' .display').show();}});});if($('.fab_form .datepicker').exists()){var lang=$('html').prop('lang');if(lang==='es'||lang==='fr'){$.datepicker.setDefaults($.datepicker.regional[lang]);}else{$.datepicker.setDefaults({dateFormat:'dd M yy'});}
$('.fab_form .datepicker').datepicker({maxDate:'-12y',defaultDate:'-21y',yearRange:'1920:-nn',numberOfMonths:1,changeMonth:true,changeYear:true,altField:'#hidden_date-'+$('.fab_form .datepicker').data('rand'),altFormat:'yy-mm-dd',onClose:function(selectedDate){}});}});jQuery(document).ready(function($){$AccountConnect=new AccountConnect();});var AccountConnect=Class.extend({init:function(){this.monitorSessionButtons();this.monitorFacebookAuth();this.monitorGoogleAuth();this.monitorAppleAuth();this.fitText();this.monitorForm();this.hasColorbox=false;},fitText:function(){if($('.fit_text').exists()){var $fitText=new fitText();}},monitorSessionButtons:function(){var self=this;$('body').on('click','.session-connect',function(e){e.preventDefault();const preselectedProfession=$(this).data('profession');if(preselectedProfession){localStorage.setItem('freshman',preselectedProfession);}
self.openSessionModal($(this));});},openSessionModal:function($element,utm){let buttonUrl='/account/sign-up';if($element){buttonUrl=$element.prop('href');}
let url=buttonUrl.includes('/account/sign-up')?'/account/register/':'/account/login/';if(utm){url+='?'+utm;}
window.location.href=url;},monitorForm:function(){var self=this;$('body').on('click','.email_connect',function(e){e.preventDefault();$('.account_box h1, .account_box .options').hide();$('.by_email').show();if(self.hasColorbox){$.colorbox.resize();}});$('body').on('click','.toggle_password',function(e){$(this).toggleClass('fa-eye fa-eye-slash');var input=$(this).prev('input');if(input.prop('type')==='password'){input.prop('type','text');}else{input.prop('type','password');}});},monitorAppleAuth:function(){$('body').on('click','.apple_connect',function(e){e.preventDefault();window.top.location.replace(this.querySelector('a').href);});},monitorFacebookAuth:function(){var self=this;$('body').on('click','.fb_connect',function(e){e.preventDefault();var unlink=$(this).data('unlink');$('.fb_connect .icon_holder').loading();FB.getLoginStatus(function(response){if(response.status==='connected'){self.connectFacebook(response,unlink);}else{FB.login(function(response){self.connectFacebook(response,unlink);},{scope:'email'});}});});},connectFacebook:function(response,unlink){if(response.status==='connected'){var data=response.authResponse;if(unlink){data.unlink=1;}
$.ajax({url:'/account/facebook/',type:'POST',dataType:'json',data:data}).success(function(data,textStatus,request){if(data.message){newGrowler.success(data.message);}
if(data.redirect){window.top.location.replace(data.redirect);}
location.reload();$('.trust_link_container').hide();}).fail(function(data,textStatus,request){newGrowler.error(data.responseText);}).always(function(){$('.fb_connect .icon_holder').loading();});}else{$('.fb_connect .icon_holder').loading();}},monitorGoogleAuth:function(){var self=this;if(typeof gapi!=='undefined'){gapi.load('auth2',function(){$('body').on('click','.google_connect',function(e){e.preventDefault();$(this).find('.icon_holder').loading();gapi.auth2.init({client_id:$('#google_client').val(),cookiepolicy:'single_host_origin'}).then((auth2)=>{auth2.signIn().then(function(googleUser){self.connectGoogle(googleUser.getAuthResponse().id_token);},function(error){$('.google_connect .icon_holder').loading();});});});});}},connectGoogle:function(token){$.ajax({url:'/account/google/',type:'POST',dataType:'json',data:{token:token}}).success(function(data,textStatus,request){window.top.location.replace(data.redirect);}).fail(function(data,textStatus,request){newGrowler.error(data.responseText);}).always(function(){$('.google_connect .icon_holder').loading();});}});jQuery(document).ready(function($){$LmitedOffer=new LmitedOffer();});var LmitedOffer=Class.extend({init:function(){this.observeNotifications();},observeNotifications:function(){var self=this;var policy_cookie=readCookie('cookie_policy');var app_cookie=readCookie('model_now');var alerts=readCookie('mm_alerts');var model_types=['beauty','professional_model','aspiring_model'];var mm_alerts;var show_promotion=false;var date=new Date();date.setTime(date.getTime()+(24*60*60*30*24*365));var expires=date.toGMTString();if(alerts){mm_alerts=jQuery.parseJSON(alerts);if(typeof mm_alerts['flash_offer_apr_19']==='undefined'||mm_alerts['flash_offer_apr_19']!==true){show_promotion=true;}}else{show_promotion=true;}
if(show_promotion&&$('#flash_offer_container').exists()){$.colorbox.close();$.colorbox({html:$('#flash_offer_container').html(),maxWidth:'100%',maxHeight:'100%',onComplete:function(){if(!mm_alerts){cookie={};}else{cookie=mm_alerts;}
cookie['flash_offer_apr_19']=true;var json=JSON.stringify(cookie);document.cookie='mm_alerts='+json+'; expires='+
expires+'; path=/;';},});}else{if($('#limited_offer_modal').length){self.monitorClick();self.countDown('.countdown');}}
if(!app_cookie&&!$('.hide_promotion').exists()){if(is_ios){$('#model_now_footer .android').hide();}else if(is_android){$('#model_now_footer .ios').hide();}else{$('#model_now_footer .app_store').addClass('both');}
$('#model_now_footer').show();}
$('#model_now_footer .close_footer').on('click',function(e){$('#model_now_footer').hide();document.cookie='model_now=footer_hidden; expires='+expires+
'; path=/;';});},monitorClick:function(){var self=this;$('body').on('click',function(){var loc=localStorage.getItem('mm_limited_offer');if(loc<5){loc++;localStorage.setItem('mm_limited_offer',loc);}else{self.openModal();localStorage.removeItem('mm_limited_offer');}});},countDown:function(element){if($(element).exists()){var days=$(element).data('days');var hours=$(element).data('hours');var minutes=$(element).data('minutes');var seconds=$(element).data('seconds');$.fn.countdowntimer.regionalOptions={labels:['Years','Months',days,hours,minutes,seconds],digits:['0','1','2','3','4','5','6','7','8','9'],isRTL:false,};$(element).each(function(){var id=$(this).prop('id');var time=$(this).data('time');$('#'+id).countdowntimer({dateAndTime:time,labelsFormat:true,displayFormat:'DHMS',});});}},openModal:function(){}});jQuery(document).ready(function($){if(!window.location.pathname.startsWith('/account/')){newCastingNotifications();}});class Snackbar{constructor(){this.container=$('.snackbar-container');if(!this.container.length){this.container=$('<div class="snackbar-container"></div>');$('body').append(this.container);}}
open({content,duration,onClose}){const snackbar=$('<div class="snackbar"></div>');snackbar.append(content);this.container.append(snackbar);setTimeout(()=>{this.close(snackbar,onClose);},duration||5000);return{el:snackbar.get(0),close:()=>{this.close(snackbar,onClose);},}}
close(el,onClose){el.fadeOut('normal',function(){$(this).remove();onClose?.();});}}
const snackbar=new Snackbar();function addToShownCastings(slug){const shownCastings=JSON.parse(localStorage.getItem('newCastings')||'{}');shownCastings[slug]=true;localStorage.setItem('newCastings',JSON.stringify(shownCastings));}
function newCastingNotifications(){const isPaymentPage=window.location.pathname.split('/').includes('memberships');const mmtCookie=readCookie('mmt');const isInternal=mmtCookie&&JSON.parse(unescape(mmtCookie)).internal;if(isInternal||user_type!=='beauty'||isPaymentPage){return;}
function fetchNewCastings(){$.ajax({type:'get',url:'/backend/api/casting/live-alert',beforeSend:function(xhr){xhr.setRequestHeader('Authorization',decodeURIComponent(readCookie('auth._token.customLocal')));},}).done(function({data:castings}){const shownCastings=JSON.parse(localStorage.getItem('newCastings')||'{}');castings.forEach((casting)=>{if(shownCastings[casting.slug]){return;}
const image=casting.images[0]?.src?`<img src="${casting.images[0]?.src}" />`:`<div class="casting-placeholder">
                            <span class="icon center is-normal" style="font-size: 24px">
                                <svg viewBox="0 0 24 24">
                                    <path
                                        d="M9,11.75A1.25,1.25 0 0,0 7.75,13A1.25,1.25 0 0,0 9,14.25A1.25,1.25 0 0,0 10.25,13A1.25,1.25 0 0,0 9,11.75M15,11.75A1.25,1.25 0 0,0 13.75,13A1.25,1.25 0 0,0 15,14.25A1.25,1.25 0 0,0 16.25,13A1.25,1.25 0 0,0 15,11.75M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20C7.59,20 4,16.41 4,12C4,11.71 4,11.42 4.05,11.14C6.41,10.09 8.28,8.16 9.26,5.77C11.07,8.33 14.05,10 17.42,10C18.2,10 18.95,9.91 19.67,9.74C19.88,10.45 20,11.21 20,12C20,16.41 16.41,20 12,20Z"
                                    ></path>
                                </svg>
                            </span>
                            <span class="icon corner top-left is-normal" style="font-size: 24px">
                                <svg viewBox="0 0 24 24">
                                    <path
                                        d="M14.425 0H7.21877C3.71057 0 0.856445 2.85413 0.856445 6.36232V13.5685C0.856445 14.4962 1.60844 15.2482 2.53613 15.2482C3.46382 15.2482 4.21582 14.4962 4.21582 13.5685V6.36232C4.21582 4.70648 5.56293 3.35938 7.21877 3.35938H14.425C15.3527 3.35938 16.1047 2.60738 16.1047 1.67969C16.1047 0.751996 15.3527 0 14.425 0Z"
                                    ></path>
                                </svg>
                            </span>
                            <span class="icon corner top-right is-normal" style="font-size: 24px">
                                <svg viewBox="0 0 24 24">
                                    <path
                                        d="M14.425 0H7.21877C3.71057 0 0.856445 2.85413 0.856445 6.36232V13.5685C0.856445 14.4962 1.60844 15.2482 2.53613 15.2482C3.46382 15.2482 4.21582 14.4962 4.21582 13.5685V6.36232C4.21582 4.70648 5.56293 3.35938 7.21877 3.35938H14.425C15.3527 3.35938 16.1047 2.60738 16.1047 1.67969C16.1047 0.751996 15.3527 0 14.425 0Z"
                                    ></path>
                                </svg>
                            </span>
                            <span class="icon corner bottom-right is-normal" style="font-size: 24px">
                                <svg viewBox="0 0 24 24">
                                    <path
                                        d="M14.425 0H7.21877C3.71057 0 0.856445 2.85413 0.856445 6.36232V13.5685C0.856445 14.4962 1.60844 15.2482 2.53613 15.2482C3.46382 15.2482 4.21582 14.4962 4.21582 13.5685V6.36232C4.21582 4.70648 5.56293 3.35938 7.21877 3.35938H14.425C15.3527 3.35938 16.1047 2.60738 16.1047 1.67969C16.1047 0.751996 15.3527 0 14.425 0Z"
                                    ></path>
                                </svg>
                            </span>
                            <span class="icon corner bottom-left is-normal" style="font-size: 24px">
                                <svg viewBox="0 0 24 24">
                                    <path
                                        d="M14.425 0H7.21877C3.71057 0 0.856445 2.85413 0.856445 6.36232V13.5685C0.856445 14.4962 1.60844 15.2482 2.53613 15.2482C3.46382 15.2482 4.21582 14.4962 4.21582 13.5685V6.36232C4.21582 4.70648 5.56293 3.35938 7.21877 3.35938H14.425C15.3527 3.35938 16.1047 2.60738 16.1047 1.67969C16.1047 0.751996 15.3527 0 14.425 0Z"
                                    ></path>
                                </svg>
                            </span>
                        </div>`;const ref=snackbar.open({duration:60000,content:`
                        <a
                            href="/casting/${casting.slug}/"
                            class="castings-notification track-upgrade"
                            data-upgrade='{"category": "live_alerts", "action": "Click", "label": ${casting.id}}'
                        >
                            <div class="image">
                                ${image}
                            </div>
                            <div class="details">
                                <div>
                                    ${_('New casting for you!')}
                                </div>
                            
                                <div class="snackbar-title">
                                    ${casting.title}
                                </div>
                            </div>
                            <span class="close icon is-small" style="font-size: 16px;"><svg viewBox="0 0 24 24"><path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"></path></svg></span>
                        </a>
                    `,onClose:()=>{addToShownCastings(casting.slug);}});ref.el.querySelector('.close')?.addEventListener('click',(e)=>{e.preventDefault();ref.close();});});});}
fetchNewCastings();setInterval(fetchNewCastings,300000);}